(this.webpackJsonpreactapp=this.webpackJsonpreactapp||[]).push([[0],{320:function(e,t,n){},322:function(e,t,n){},364:function(e,t,n){},365:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),c=n(23),s=n.n(c),i=n(8),o=n(12),l=n(213),u=n(440),d=n(136),j=n(25),h=n(20),b=n(408),p=n(410),m=n(54),O=n(411),f=n(412),g=n(10),x=n.n(g),v=n(19),y=n(13),S=n.n(y),w=n(93),C=n.n(w),_="REGISTER_SUCCESS",P="REGISTER_FAIL",E="ACTIVATE_SUCCESS",T="ACTIVATE_FAIL",k="RESEND_ACTIVATION_EMAIL_SUCCESS",L="RESEND_ACTIVATION_EMAIL_FAIL",A="LOAD_USER_SUCCESS",I="LOAD_USER_FAIL",N="CHECK_AUTHENTICATION_SUCCESS",R="CHECK_AUTHENTICATION_FAIL",F="LOGIN_SUCCESS",U="LOGIN_FAIL",D="LOGOUT",M="DELETE_ACCOUNT_SUCCESS",W="DELETE_ACCOUNT_FAIL",q="RESET_PASSWORD_SUCCESS",H="RESET_PASSWORD_FAIL",B="RESET_PASSWORD_CONFIRM_SUCCESS",G="RESET_PASSWORD_CONFIRM_FAIL",J="CHANGE_PASSWORD_SUCCESS",Q="CHANGE_PASSWORD_FAIL",z="AUTH_LOADING",Y="RESET_AUTH_LOADING",V="PROFILE_LOADING",K="RESET_AUTH_ERROR_MSG",X="RESET_CHANGE_PASSWORD_SUCCESS",Z="RESET_EDIT_BIO_SUCCESS",$="RESET_EDIT_FAVOURITES_SUCCESS",ee="CHANGE_PROFILE_PIC_SUCCESS",te="CHANGE_PROFILE_PIC_FAIL",ne="EDIT_BIO_SUCCESS",ae="EDIT_BIO_FAIL",re="EDIT_FAVOURITES_SUCCESS",ce="EDIT_FAVOURITES_FAIL",se="SET_PREV_PATH",ie="GOOGLE_AUTH_SUCCESS",oe="GOOGLE_AUTH_FAIL",le="SET_JUST_REGISTERED_SUCCESS",ue="SET_JUST_REGISTERED_FAIL";S.a.defaults.xsrfCookieName="csrftoken",S.a.defaults.xsrfHeaderName="X-CSRFToken";var de="Incorrect password",je="Unable to delete account",he="Unable to reset passowrd",be="New password too weak",pe=function(){return function(){var e=Object(v.a)(x.a.mark((function e(t){var n,a,r;return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t(Ue()),!(n=localStorage.getItem("access"))){e.next=16;break}return a={headers:{"Content-Type":"application/json",Authorization:"JWT ".concat(n),Accept:"application/json"}},e.prev=4,e.next=7,S.a.get("/auth/users/me/",a);case 7:r=e.sent,t(Se(r.data)),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(4),t(we());case 14:e.next=17;break;case 16:t(we());case 17:case"end":return e.stop()}}),e,null,[[4,11]])})));return function(t){return e.apply(this,arguments)}}()},me=function(){return function(){var e=Object(v.a)(x.a.mark((function e(t){var n,a,r;return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(n=localStorage.getItem("access"))){e.next=16;break}return a={headers:{"Content-Type":"application/json",Accept:"application/json"}},r=JSON.stringify({token:n}),e.prev=4,e.next=7,S.a.post("/auth/jwt/verify/",r,a);case 7:"token_not_valid"!==e.sent.data.code?(t(Ce()),t(pe())):t(_e()),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(4),t(_e());case 14:e.next=17;break;case 16:t(_e());case 17:case"end":return e.stop()}}),e,null,[[4,11]])})));return function(t){return e.apply(this,arguments)}}()},Oe=function(){return{type:_}},fe=function(e){return{type:P,payload:e}},ge=function(){return{type:E}},xe=function(e){return{type:T,payload:e}},ve=function(){return{type:k}},ye=function(e){return{type:L,payload:e}},Se=function(e){return{type:A,payload:e}},we=function(){return{type:I}},Ce=function(){return{type:N}},_e=function(){return{type:R}},Pe=function(e){return{type:F,payload:e}},Ee=function(e){return{type:U,payload:e}},Te=function(){return{type:M}},ke=function(e){return{type:W,payload:e}},Le=function(){return{type:q}},Ae=function(e){return{type:H,payload:e}},Ie=function(){return{type:B}},Ne=function(e){return{type:G,payload:e}},Re=function(){return{type:J}},Fe=function(e){return{type:Q,payload:e}},Ue=function(){return{type:z}},De=function(){return{type:V}},Me=function(e){return{type:ee,payload:e}},We=function(e){return{type:te,payload:e}},qe=function(){return{type:ne}},He=function(e){return{type:ae,payload:e}},Be=function(){return{type:re}},Ge=function(e){return{type:ce,payload:e}},Je=function(e){return{type:le,payload:e}},Qe=function(e){return{type:ue,payload:e}},ze=n(1),Ye={activate:function(e,t){return function(){var n=Object(v.a)(x.a.mark((function n(a){var r,c;return x.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return a(Ue()),r={headers:{"Content-Type":"application/json"}},c=JSON.stringify({uid:e,token:t}),n.prev=3,n.next=6,S.a.post("/auth/users/activation/",c,r);case 6:a(ge()),n.next=12;break;case 9:n.prev=9,n.t0=n.catch(3),n.t0.response.data.uid||n.t0.response.data.token?a(xe("Expired activation token")):a(xe("Unable to activate account"));case 12:case"end":return n.stop()}}),n,null,[[3,9]])})));return function(e){return n.apply(this,arguments)}}()}},Ve=Object(o.b)((function(e){return{authLoading:e.auth.authLoading,activationSuccess:e.auth.activationSuccess}}),Ye)((function(e){var t=e.authLoading,n=e.activationSuccess,a=e.activate,r=Object(b.a)((function(e){return{paper:{display:"flex",flexDirection:"column",alignItems:"center"},button:{margin:e.spacing(3,0,2)}}}))(),c=Object(j.g)(),s=Object(j.i)(),i=s.uid,o=s.token;return Object(ze.jsx)(p.a,{maxWidth:"xs",children:Object(ze.jsx)("div",{className:r.paper,children:n?Object(ze.jsxs)("form",{onSubmit:function(e){e.preventDefault(),c.push("/login")},children:[Object(ze.jsx)(m.a,{variant:"h6",noWrap:!0,style:{textAlign:"center"},children:"You have successfully activated your account."}),Object(ze.jsx)(O.a,{autoFocus:!0,type:"submit",fullWidth:!0,variant:"contained",color:"primary",className:r.button,children:"Proceed to Login"})]}):Object(ze.jsxs)("form",{onSubmit:function(e){e.preventDefault(),a(i,o)},children:[Object(ze.jsx)(O.a,{type:"submit",fullWidth:!0,variant:"contained",color:"primary",className:r.button,disabled:t,autoFocus:!0,children:"Activate"}),Object(ze.jsx)(f.a,{container:!0,justify:"flex-end",children:Object(ze.jsx)(f.a,{item:!0,children:Object(ze.jsx)(h.c,{to:"/resend-activation-email",variant:"body2",children:"Resend activation email"})})})]})})})})),Ke=function(){return Object(ze.jsx)("div",{children:"User Dashboard"})},Xe="SingleChoice",Ze="MultipleChoice",$e="Priority",et="Self",tt="Other",nt="My post(s)",at="Filter",rt="GET_POST_LIST_SUCCESS",ct="GET_POST_LIST_FAIL",st="GET_POST_DETAIL_SUCCESS",it="GET_POST_DETAIL_FAIL",ot="GET_USER_POSTS_SUCCESS",lt="GET_USER_POSTS_FAIL",ut="CREATE_POST_SUCCESS",dt="CREATE_POST_FAIL",jt="EDIT_POST_SUCCESS",ht="EDIT_POST_FAIL",bt="DELETE_POST_SUCCESS",pt="DELETE_POST_FAIL",mt="POST_LOADING",Ot="RESET_POST_LOADING",ft="RESET_POST_ERROR_MSG",gt="RESET_CREATE_POST_SUCCESS",xt="RESET_EDIT_POST_SUCCESS",vt="RESET_DELETE_POST_SUCCESS",yt="SEARCH_POST_SUCCESS",St="SEARCH_POST_FAIL",wt="CANCEL_SEARCH_SUCCESS",Ct="CANCEL_SEARCH_FAIL",_t="SET_PAGE",Pt="SET_FILTER";S.a.defaults.xsrfCookieName="csrftoken",S.a.defaults.xsrfHeaderName="X-CSRFToken";var Et={bucketName:"housematesorbital",dirName:"images",region:"us-east-2",accessKeyId:"AKIA2VQMUMOWCECPYUOU",secretAccessKey:"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"},Tt="Unable to submit form",kt="Unable to edit post",Lt=function(e,t){return function(){var n=Object(v.a)(x.a.mark((function n(a){var r,c;return x.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(a(Kt()),r={headers:{"Content-Type":"application/json"}},n.prev=2,void 0!==e||void 0!=t){n.next=9;break}return n.next=6,S.a.get("/form/post-list/",r);case 6:c=n.sent,n.next=24;break;case 9:if(void 0===e||void 0!==t){n.next=15;break}return n.next=12,S.a.get("/form/post-list/?form_type=".concat(e),r);case 12:c=n.sent,n.next=24;break;case 15:if(void 0!==e||void 0===t){n.next=21;break}return n.next=18,S.a.get("/form/post-list/?page=".concat(t),r);case 18:c=n.sent,n.next=24;break;case 21:return n.next=23,S.a.get("/form/post-list/?form_type=".concat(e,"&page=").concat(t),r);case 23:c=n.sent;case 24:a(Dt(e,c.data)),n.next=30;break;case 27:n.prev=27,n.t0=n.catch(2),a(Mt("Unable to load posts"));case 30:case"end":return n.stop()}}),n,null,[[2,27]])})));return function(e){return n.apply(this,arguments)}}()},At=function(e){return function(){var t=Object(v.a)(x.a.mark((function t(n){var a,r;return x.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n(Kt()),a={headers:{"Content-Type":"application/json"}},t.prev=2,t.next=5,S.a.get("/form/post-list/".concat(e,"/"),a);case 5:r=t.sent,n(Wt(r.data)),t.next=12;break;case 9:t.prev=9,t.t0=t.catch(2),n(qt("Unable to load post"));case 12:case"end":return t.stop()}}),t,null,[[2,9]])})));return function(e){return t.apply(this,arguments)}}()},It=function(e,t,n){return function(){var a=Object(v.a)(x.a.mark((function a(r){var c,s;return x.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:if(c={headers:{"Content-Type":"application/json"}},a.prev=1,void 0===t||void 0!==n){a.next=8;break}return a.next=5,S.a.get("/form/post-list/?owner=".concat(e,"&form_type=").concat(t),c);case 5:s=a.sent,a.next=23;break;case 8:if(void 0!==t||void 0===n){a.next=14;break}return a.next=11,S.a.get("/form/post-list/?owner=".concat(e,"&page=").concat(n),c);case 11:s=a.sent,a.next=23;break;case 14:if(void 0===t||void 0===n){a.next=20;break}return a.next=17,S.a.get("/form/post-list/?owner=".concat(e,"&form_type=").concat(t,"&page=").concat(n),c);case 17:s=a.sent,a.next=23;break;case 20:return a.next=22,S.a.get("/form/post-list/?owner=".concat(e),c);case 22:s=a.sent;case 23:r(Ht(t,s.data)),a.next=29;break;case 26:a.prev=26,a.t0=a.catch(1),r(Bt(1===t?"Unable to load user roommate posts":2===t?"Unable to load user housing posts":"Unable to load user posts"));case 29:case"end":return a.stop()}}),a,null,[[1,26]])})));return function(e){return a.apply(this,arguments)}}()},Nt=function(e,t,n,a){return function(){var r=Object(v.a)(x.a.mark((function r(c){var s,i,o,l;return x.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(c(Kt()),s=localStorage.getItem("access"),i={headers:{"Content-Type":"application/json",Authorization:"JWT ".concat(s)}},!a){r.next=9;break}o=[],Array.from(Array(a.length).keys()).forEach((function(r){C.a.uploadFile(a[r],Et).then((function(e){o.push(e.location)})).then(Object(v.a)(x.a.mark((function r(){var s;return x.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(o.length!==a.length){r.next=11;break}return s=JSON.stringify({post_form_type:e,selected_choices:t,owner:n,images:o}),r.prev=2,r.next=5,S.a.post("/form/post-list/",s,i);case 5:c(Gt()),r.next=11;break;case 8:r.prev=8,r.t0=r.catch(2),c(Jt(Tt));case 11:case"end":return r.stop()}}),r,null,[[2,8]])}))))})),r.next=19;break;case 9:return l=JSON.stringify({post_form_type:e,selected_choices:t,owner:n}),r.prev=10,r.next=13,S.a.post("/form/post-list/",l,i);case 13:c(Gt()),r.next=19;break;case 16:r.prev=16,r.t0=r.catch(10),c(Jt(Tt));case 19:case"end":return r.stop()}}),r,null,[[10,16]])})));return function(e){return r.apply(this,arguments)}}()},Rt=function(e,t,n,a,r,c,s){return function(){var i=Object(v.a)(x.a.mark((function i(o){var l,u,d,j;return x.a.wrap((function(i){for(;;)switch(i.prev=i.next){case 0:if(o(Kt()),l=localStorage.getItem("access"),u={headers:{"Content-Type":"application/json",Authorization:"JWT ".concat(l)}},!s){i.next=9;break}d=[],Array.from(Array(s.length).keys()).forEach((function(i){C.a.uploadFile(s[i],Et).then((function(e){d.push(e.location)})).then(Object(v.a)(x.a.mark((function i(){var l;return x.a.wrap((function(i){for(;;)switch(i.prev=i.next){case 0:if(d.length!==s.length){i.next=11;break}return l=JSON.stringify({post_form_type:t,selected_choices:n,owner:a,score_list:r,total_score:c,images:d}),i.prev=2,i.next=5,S.a.put("/form/post-list/".concat(e,"/"),l,u);case 5:o(Qt()),i.next=11;break;case 8:i.prev=8,i.t0=i.catch(2),o(zt(kt));case 11:case"end":return i.stop()}}),i,null,[[2,8]])}))))})),i.next=19;break;case 9:return j=JSON.stringify({post_form_type:t,selected_choices:n,owner:a,score_list:r,total_score:c}),i.prev=10,i.next=13,S.a.put("/form/post-list/".concat(e,"/"),j,u);case 13:o(Qt()),i.next=19;break;case 16:i.prev=16,i.t0=i.catch(10),o(zt(kt));case 19:case"end":return i.stop()}}),i,null,[[10,16]])})));return function(e){return i.apply(this,arguments)}}()},Ft=function(e){return function(){var t=Object(v.a)(x.a.mark((function t(n){var a,r;return x.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n(Kt()),a=localStorage.getItem("access"),r={headers:{"Content-Type":"application/json",Authorization:"JWT ".concat(a)}},t.prev=3,t.next=6,S.a.delete("/form/post-list/".concat(e,"/"),r);case 6:n(Yt()),t.next=12;break;case 9:t.prev=9,t.t0=t.catch(3),n(Vt("Unable to delete post"));case 12:case"end":return t.stop()}}),t,null,[[3,9]])})));return function(e){return t.apply(this,arguments)}}()},Ut=function(e,t,n){return function(){var a=Object(v.a)(x.a.mark((function a(r){var c,s,i;return x.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:if(r(Kt()),c={headers:{"Content-Type":"application/json"}},s="string"===typeof t?t:t.join(","),a.prev=3,void 0===n){a.next=10;break}return a.next=7,S.a.get("/form/post-list/?form_type=".concat(e,"&search=").concat(s,"&page=").concat(n),c);case 7:i=a.sent,a.next=13;break;case 10:return a.next=12,S.a.get("/form/post-list/?form_type=".concat(e,"&search=").concat(s),c);case 12:i=a.sent;case 13:r(en(i.data,t)),a.next=19;break;case 16:a.prev=16,a.t0=a.catch(3),r(tn("Unable to search post"));case 19:case"end":return a.stop()}}),a,null,[[3,16]])})));return function(e){return a.apply(this,arguments)}}()},Dt=function(e,t){return{type:rt,payload:{type:e,resdata:t}}},Mt=function(e){return{type:ct,payload:e}},Wt=function(e){return{type:st,payload:e}},qt=function(e){return{type:it,payload:e}},Ht=function(e,t){return{type:ot,payload:{type:e,userPosts:t}}},Bt=function(e){return{type:lt,payload:e}},Gt=function(){return{type:ut}},Jt=function(e){return{type:dt,payload:e}},Qt=function(){return{type:jt}},zt=function(e){return{type:ht,payload:e}},Yt=function(){return{type:bt}},Vt=function(e){return{type:pt,payload:e}},Kt=function(){return{type:mt}},Xt=function(){return{type:gt}},Zt=function(){return{type:xt}},$t=function(){return{type:vt}},en=function(e,t){return{type:yt,payload:{searchedPost:e,searchItem:t}}},tn=function(e){return{type:St,payload:e}},nn=function(){return{type:wt}},an=function(e){return{type:Ct,payload:e}},rn=function(e){return{type:_t,payload:e}},cn=function(e){return{type:Pt,payload:e}},sn=n(85),on=n(413),ln=n(414),un=n(415),dn=n(416),jn=n(452),hn="GET_ROOM_LIST_SUCCESS",bn="GET_ROOM_LIST_FAIL",pn="CHECK_CHAT_HISTORY_SUCCESS",mn="CHECK_CHAT_HISTORY_FAIL",On="GET_ROOM_DETAIL_SUCCESS",fn="GET_ROOM_DETAIL_FAIL",gn="POST_ROOM_LIST_SUCCESS",xn="POST_ROOM_LIST_FAIL",vn="EDIT_MSG_SUCCESS",yn="EDIT_MSG_FAIL",Sn="SET_CHAT_USER",wn="RESET_CHAT_HISTORY";S.a.defaults.xsrfCookieName="csrftoken",S.a.defaults.xsrfHeaderName="X-CSRFToken";var Cn=function(e){return function(){var t=Object(v.a)(x.a.mark((function t(n){var a,r;return x.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a={headers:{"Content-Type":"application/json"}},t.prev=1,t.next=4,S.a.get("/chat/room-list/?current=".concat(e),a);case 4:r=t.sent,n(_n(r.data)),t.next=11;break;case 8:t.prev=8,t.t0=t.catch(1),n(Pn("Unable to load rooms"));case 11:case"end":return t.stop()}}),t,null,[[1,8]])})));return function(e){return t.apply(this,arguments)}}()},_n=function(e){return{type:hn,payload:e}},Pn=function(e){return{type:bn,payload:e}},En=function(e){return{type:pn,payload:e}},Tn=function(e){return{type:mn,payload:e}},kn=function(e){return{type:gn,payload:e}},Ln=function(e){return{type:xn,payload:e}},An=function(){return{type:vn}},In=function(e){return{type:yn,payload:e}},Nn=function(e){return{type:Sn,payload:e}},Rn={setChatUser:Nn},Fn=Object(o.b)(null,Rn)((function(e){var t,n=e.name,a=e.desc,r=e.pic,c=e.scoreList,s=e.unreadMsgs,i=e.type,o=e.id,l=e.chatUser,u=e.setChatUser,d=Object(j.g)();return Object(ze.jsx)(h.b,{onClick:function(){1===i?d.push("/roommates/".concat(o)):1===i?d.push("/housings/".concat(o)):(u(l),d.push("/chat"))},style:{textDecoration:"none"},children:Object(ze.jsxs)(on.a,{style:{display:"flex",flexDirection:"row",margin:10},children:[Object(ze.jsx)(ln.a,{image:r,title:n,style:{width:100}}),Object(ze.jsx)(un.a,{children:Object(ze.jsxs)(dn.a,{children:[Object(ze.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",width:"100%"},children:[Object(ze.jsx)(m.a,{children:n}),1===i?Object(ze.jsx)(jn.a,{label:(null===(t=c[o])||void 0===t?void 0:t.score)+"%",color:"secondary",size:"small"}):i?null:Object(ze.jsx)(ze.Fragment,{children:0!==s&&Object(ze.jsx)("div",{style:{width:20,height:20,backgroundColor:"red",display:"flex",justifyContent:"center",alignItems:"center",borderRadius:"50%"},children:Object(ze.jsx)("div",{style:{color:"white",textAlign:"center"},children:s})})})]}),Object(ze.jsx)(m.a,{variant:"body1",color:"textSecondary",children:a&&(a.length>25?a.substring(0,25)+"...":a)})]})})]})})})),Un=function(){return Object(ze.jsxs)(m.a,{variant:"body2",color:"textSecondary",align:"center",children:["Copyright \xa9 ","Team Eclipse"," ",(new Date).getFullYear(),"."]})},Dn=n.p+"static/media/housemates-logo-without-text-black.3fe185f4.svg",Mn=n.p+"static/media/home.1302a908.jpg",Wn=n.p+"static/media/mates.f0290a24.jpg",qn=n.p+"static/media/house.0ebe15c4.jpg",Hn=n.p+"static/media/chat.c347d5c9.png",Bn=n(422),Gn=n(157),Jn=n(125),Qn=n.n(Jn),zn=n(126),Yn=n.n(zn),Vn=n(417),Kn=n(418),Xn=n(419),Zn=n(420),$n=n(421),ea=Object(o.b)((function(e){return{postLoading:e.post.postLoading}}))((function(e){var t=e.postLoading,n=e.open,a=e.confirmationText,r=e.thankYouText,c=e.success,s=e.handleCancel,i=e.handleSubmit,o=e.handleClose;return Object(ze.jsxs)(Vn.a,{open:n,children:[Object(ze.jsx)(Kn.a,{children:"Confirmation"}),c?Object(ze.jsxs)(ze.Fragment,{children:[Object(ze.jsx)(Xn.a,{children:Object(ze.jsx)(m.a,{variant:"body1",children:r})}),Object(ze.jsx)(Zn.a,{children:Object(ze.jsx)(O.a,{autoFocus:!0,variant:"contained",color:"primary",type:"submit",onClick:o,children:"Close"})})]}):Object(ze.jsxs)("div",{children:[Object(ze.jsxs)(Xn.a,{children:[Object(ze.jsx)(m.a,{variant:"body1",children:a}),t&&Object(ze.jsx)("div",{style:{display:"flex",flexDirection:"column",alignItems:"center"},children:Object(ze.jsx)($n.a,{style:{marginTop:10,marginBottom:10}})})]}),Object(ze.jsxs)(Zn.a,{children:[Object(ze.jsx)(O.a,{variant:"contained",onClick:s,children:"No"}),Object(ze.jsx)(O.a,{color:"primary",disabled:t,onClick:i,type:"submit",variant:"contained",children:"Yes"})]})]})]})})),ta={deletePost:Ft,resetDeletePostSuccess:$t,getPostList:Lt,getUserPosts:It,loadUser:pe},na=Object(o.b)((function(e){return{user:e.auth.user,userRoommatePosts:e.post.userRoommatePosts,deletePostSuccess:e.post.deletePostSuccess}}),ta)((function(e){var t,n=e.post,r=e.page,c=e.user,s=e.loadUser,o=e.deletePost,l=e.deletePostSuccess,u=e.resetDeletePostSuccess,d=e.getPostList,p=e.userRoommatePosts,O=e.getUserPosts,f=Object(b.a)((function(e){return{card:{width:345,cursor:"pointer",alignSelf:"center"},media:{height:160},tag:{marginRight:5,marginTop:5},text:{height:80},edit:{float:"right",marginRight:5,marginTop:5},delete:{float:"right",marginRight:-15,marginTop:5},icon:{color:"black"}}}))(),g=Object(j.g)(),x=Object(a.useState)(!1),v=Object(i.a)(x,2),y=v[0],S=v[1],w=["Irrelevant","A little important","Somewhat important","Very important","Mandatory"];return Object(a.useEffect)((function(){return s()}),[]),Object(a.useEffect)((function(){return c?O(c.id):null}),[c]),Object(ze.jsxs)(ze.Fragment,{children:[Object(ze.jsxs)(on.a,{className:f.card,children:[(null===c||void 0===c?void 0:c.id)===n.owner.id&&Object(ze.jsxs)(ze.Fragment,{children:[Object(ze.jsx)(Bn.a,{title:"",className:f.edit,onClick:function(){g.push("/edit-roommate-form/".concat(n.id))},children:Object(ze.jsx)(Gn.a,{className:f.icon,children:Object(ze.jsx)(Qn.a,{})})}),Object(ze.jsx)(Bn.a,{title:"",className:f.delete,onClick:function(){S(!0)},children:Object(ze.jsx)(Gn.a,{className:f.icon,children:Object(ze.jsx)(Yn.a,{})})})]}),Object(ze.jsxs)(h.b,{to:"/roommates/".concat(n.id),style:{textDecoration:"none",color:"black"},children:[Object(ze.jsx)(ln.a,{className:f.media,image:n.owner.profile_pic,title:n.owner.first_name+" "+n.owner.last_name}),Object(ze.jsx)(un.a,{children:Object(ze.jsxs)(dn.a,{children:[Object(ze.jsxs)(m.a,{variant:"h5",color:"textPrimary",children:[n.owner.first_name," ",n.owner.last_name," ",null===p||void 0===p?void 0:p.map((function(e){var t,a;return e.owner.id!==n.owner.id&&1===e.post_form_type&&(null===(t=n.score_list[e.id])||void 0===t?void 0:t.score)?Object(ze.jsx)(jn.a,{label:(null===(a=n.score_list[e.id])||void 0===a?void 0:a.score)+"%",color:"secondary",className:f.tag}):null}))]}),Object(ze.jsx)(m.a,{variant:"body2",color:"textSecondary",className:f.text,children:(null===n||void 0===n||null===(t=n.owner.bio)||void 0===t?void 0:t.length)>150?n.owner.bio.substring(0,150)+"...":n.owner.bio}),Object(ze.jsx)("br",{}),Object(ze.jsx)(m.a,{variant:"body2",color:"textSecondary",gutterBottom:!0,children:"Looking for roommates who are:"}),function(e){for(var t=e.selected_choices,n=[],a=w.length-1;a>=0;a--)for(var r=0;r<t.length;r++)for(var c=0;c<t[r].length;c++)if(n.length<3&&t[r][c].priority===w[a])if(Array.isArray(t[r][c].otherChoice))for(var s=0;s<t[r][c].otherChoice.length;s++)n.length<3&&n.push(t[r][c].otherChoice[s]);else n.push(t[r][c].otherChoice);return n}(n).map((function(e){return Object(ze.jsx)(jn.a,{label:e,color:"primary",className:f.tag},e)}))]})})]})]}),Object(ze.jsx)(ea,{open:y,confirmationText:"Are you sure you want to delete?",thankYouText:"You have successfully deleted your post",success:l,handleCancel:function(){S(!1)},handleSubmit:function(){o(n.id)},handleClose:function(){u(),d(1,r),O(c.id,1),S(!1)}})]})})),aa=n(14),ra=n(4),ca=n(198),sa=n.n(ca),ia=(n.p,{deletePost:Ft,resetDeletePostSuccess:$t,getPostList:Lt,editFavourites:function(e,t,n,a){return function(){var r=Object(v.a)(x.a.mark((function r(c){var s,i,o;return x.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return s=localStorage.getItem("access"),i={headers:{"Content-Type":"application/json",Authorization:"JWT ".concat(s)}},o=JSON.stringify({first_name:e,last_name:t,favourites:a}),r.prev=3,r.next=6,S.a.patch("/accounts/profiles/".concat(n,"/"),o,i);case 6:c(Be()),r.next=12;break;case 9:r.prev=9,r.t0=r.catch(3),c(Ge("Unable to edit favourites"));case 12:case"end":return r.stop()}}),r,null,[[3,9]])})));return function(e){return r.apply(this,arguments)}}()},loadUser:pe,resetEditFavouritesSuccess:function(){return{type:$}}}),oa=Object(o.b)((function(e){return{user:e.auth.user,deletePostSuccess:e.post.deletePostSuccess,editFavouritesSuccess:e.auth.editFavouritesSuccess}}),ia)((function(e){var t,n,r,c=e.post,s=e.page,o=e.user,l=e.loadUser,u=e.deletePost,d=e.deletePostSuccess,p=e.resetDeletePostSuccess,O=e.getPostList,f=e.editFavourites,g=e.editFavouritesSuccess,x=e.resetEditFavouritesSuccess,v=Object(b.a)((function(e){return{card:{display:"flex",height:200,cursor:"pointer",position:"relative"},content:{flex:"1 0 auto"},media:{width:400},edit:{position:"absolute",right:0,marginRight:5,marginTop:5},delete:{position:"absolute",right:40,marginTop:5},icon:{color:"black"},red:{color:"red"},white:{color:"white"}}}))(),y=Object(j.g)(),S=Object(a.useState)(!1),w=Object(i.a)(S,2),C=w[0],_=w[1];return Object(a.useEffect)((function(){g&&l()}),[g]),Object(ze.jsxs)(ze.Fragment,{children:[Object(ze.jsxs)(on.a,{className:v.card,children:[o?(null===o||void 0===o?void 0:o.id)===c.owner.id?Object(ze.jsxs)(ze.Fragment,{children:[Object(ze.jsx)(Bn.a,{title:"",className:v.edit,onClick:function(){y.push("/edit-housing-form/".concat(c.id))},children:Object(ze.jsx)(Gn.a,{className:v.icon,children:Object(ze.jsx)(Qn.a,{})})}),Object(ze.jsx)(Bn.a,{title:"",className:v.delete,onClick:function(){_(!0)},children:Object(ze.jsx)(Gn.a,{className:v.icon,children:Object(ze.jsx)(Yn.a,{})})})]}):Object(ze.jsx)(Bn.a,{title:"",className:v.edit,children:Object(ze.jsx)(Gn.a,{className:Object(ra.a)((r={},Object(aa.a)(r,v.red,null===o||void 0===o||null===(t=o.favourites)||void 0===t?void 0:t.includes(c.id)),Object(aa.a)(r,v.white,!(null===o||void 0===o||null===(n=o.favourites)||void 0===n?void 0:n.includes(c.id))),r)),onClick:function(){x();var e=o.favourites||[];e.includes(c.id)?(e.splice(e.indexOf(c.id),1),f(o.first_name,o.last_name,o.id,e)):(e.push(c.id),f(o.first_name,o.last_name,o.id,e))},children:Object(ze.jsx)(sa.a,{})})}):null,Object(ze.jsxs)(h.b,{to:"/housings/".concat(c.id),style:{textDecoration:"none",color:"black",display:"flex",height:"100%",width:"100%"},children:[Object(ze.jsx)(un.a,{children:Object(ze.jsxs)(dn.a,{className:v.content,children:[Object(ze.jsx)(m.a,{variant:"h5",children:c.selected_choices[0][0].choice}),Object(ze.jsxs)(m.a,{variant:"body2",color:"textSecondary",children:["Located at ",c.selected_choices[0][2].choice]}),Object(ze.jsx)("br",{}),Object(ze.jsxs)(m.a,{variant:"body2",color:"textSecondary",children:[c.selected_choices[1][0].choice," \xb7"," ",c.selected_choices[1][1].choice," \xb7"," ",c.selected_choices[1][2].choice.map((function(e,t){return 0===t?Object(ze.jsxs)(a.Fragment,{children:[e," "]},e):Object(ze.jsxs)(a.Fragment,{children:["\xb7 ",e," "]},e)}))]}),Object(ze.jsx)("br",{}),Object(ze.jsxs)("div",{style:{display:"flex",justifyContent:"flex-end",alignItems:"center"},children:[Object(ze.jsxs)(m.a,{variant:"h6",children:["SGD ",c.selected_choices[0][3].choice]}),Object(ze.jsx)(m.a,{variant:"body2",color:"textSecondary",children:"\xa0/ night"})]})]})}),Object(ze.jsx)(ln.a,{className:v.media,image:null===c||void 0===c?void 0:c.images[0],title:null===c||void 0===c?void 0:c.selected_choices[0][0].choice})]})]}),Object(ze.jsx)(ea,{open:C,confirmationText:"Are you sure you want to delete?",thankYouText:"You have successfully deleted your post",success:d,handleCancel:function(){_(!1)},handleSubmit:function(){u(c.id)},handleClose:function(){p(),O(2,s),_(!1)}})]})})),la={getPostList:Lt},ua=Object(o.b)((function(e){return{posts:e.post.posts,housingPosts:e.post.housingPosts,postLoading:e.post.postLoading}}),la)((function(e){var t=e.posts,n=e.housingPosts,r=e.postLoading,c=e.getPostList,s=Object(b.a)((function(e){return{button:{borderRadius:20,"&:hover":{backgroundColor:e.palette.primary.main,color:"white"}}}}));Object(a.useEffect)((function(){c(1)}),[]),Object(a.useEffect)((function(){c(2)}),[]);var i=Object(j.g)(),o=s(),l=function(){return i.push("/roommates")};return Object(ze.jsxs)(f.a,{container:!0,children:[Object(ze.jsx)(sn.a,{style:{width:"100%",margin:20,marginTop:20,padding:10},children:Object(ze.jsxs)(f.a,{item:!0,xs:12,style:{display:"flex",justifyContent:"center"},children:[Object(ze.jsx)("img",{alt:"home",src:Mn,height:"400",style:{opacity:.3}}),Object(ze.jsxs)("div",{style:{position:"absolute",width:"100%",height:400,display:"flex",justifyContent:"center",alignItems:"center"},children:[Object(ze.jsx)("img",{alt:"logo",src:Dn,width:"100",height:"100",style:{marginRight:20}}),Object(ze.jsxs)("div",{style:{display:"flex",flexDirection:"column"},children:[Object(ze.jsx)(m.a,{variant:"h2",children:"Welcome to HouseMates."}),Object(ze.jsx)(m.a,{variant:"h5",children:"Your one stop solution to a warm stay in Singapore."})]})]})]})}),Object(ze.jsx)(sn.a,{style:{width:"100%",margin:20,padding:50,marginTop:80},children:Object(ze.jsxs)(f.a,{container:!0,item:!0,xs:12,children:[Object(ze.jsx)(f.a,{item:!0,xs:6,style:{display:"flex",justifyContent:"center"},children:"Video"}),Object(ze.jsxs)(f.a,{item:!0,xs:6,style:{display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center"},children:[Object(ze.jsx)(m.a,{variant:"body1",children:"We cater towards your accomodation related needs,"}),Object(ze.jsx)(m.a,{variant:"body1",children:"be it finding an accomodation with a housemate, or hosting your housings."}),Object(ze.jsx)(m.a,{variant:"body1",children:"Login or sign up now! No phone numbers required."}),Object(ze.jsxs)("div",{style:{marginTop:30},children:[Object(ze.jsx)(O.a,{variant:"outlined",style:{marginRight:10},onClick:function(){return i.push("/login")},className:o.button,children:"Login"}),Object(ze.jsx)(O.a,{variant:"outlined",onClick:function(){return i.push("/register")},className:o.button,children:"Register"})]})]})]})}),Object(ze.jsx)(sn.a,{style:{width:"100%",margin:20,padding:50,marginTop:80},children:Object(ze.jsxs)(f.a,{container:!0,item:!0,xs:12,children:[Object(ze.jsxs)(f.a,{item:!0,xs:6,style:{display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center"},children:[Object(ze.jsx)(m.a,{variant:"body1",children:"With our latest matchmaking algorithm,"}),Object(ze.jsx)(m.a,{variant:"body1",children:"you can now be automatically paired with the next best candidate."}),Object(ze.jsx)(m.a,{variant:"body1",children:"Create an account to watch the algorithm does its magic!"})]}),Object(ze.jsx)(f.a,{item:!0,xs:6,style:{display:"flex",justifyContent:"center"},children:Object(ze.jsx)("img",{alt:"mates",src:Wn,height:"250"})})]})}),Object(ze.jsx)(f.a,{container:!0,item:!0,xs:12,style:{marginTop:80},children:t.length>0?Object(ze.jsxs)(ze.Fragment,{children:[Object(ze.jsx)(f.a,{container:!0,item:!0,xs:12,children:t.slice(0,3).map((function(e){return Object(ze.jsx)(f.a,{item:!0,xs:12,md:6,lg:4,style:{display:"flex",flexDirection:"column"},children:Object(ze.jsx)(na,{post:e})},e.id)}))}),Object(ze.jsx)(f.a,{item:!0,xs:12,style:{marginTop:20},children:Object(ze.jsx)(m.a,{align:"center",children:Object(ze.jsx)(h.b,{variant:"body2",onClick:l,children:"See more"})})})]}):Object(ze.jsx)(ze.Fragment,{children:!r&&Object(ze.jsx)("div",{style:{textAlign:"center"},children:Object(ze.jsx)(m.a,{variant:"subtitle1",children:"No post."})})})}),Object(ze.jsx)(sn.a,{style:{width:"100%",margin:20,padding:50,marginTop:80},children:Object(ze.jsxs)(f.a,{container:!0,item:!0,xs:12,children:[Object(ze.jsxs)(f.a,{item:!0,xs:6,style:{display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center"},children:[Object(ze.jsx)(m.a,{variant:"body1",children:"Have a room to spare?"}),Object(ze.jsx)(m.a,{variant:"body1",children:"We got you covered."}),Object(ze.jsx)(m.a,{variant:"body1",children:"Showcase your properties with a comprehensive"}),Object(ze.jsx)(m.a,{variant:"body1",children:"tagging feature that ensure maximum customer traffic."})]}),Object(ze.jsx)(f.a,{item:!0,xs:6,style:{display:"flex",justifyContent:"center"},children:Object(ze.jsx)("img",{alt:"house",src:qn,height:"250"})})]})}),Object(ze.jsx)(f.a,{container:!0,item:!0,xs:12,style:{marginTop:80},children:n.length>0?Object(ze.jsxs)(ze.Fragment,{children:[Object(ze.jsx)(f.a,{container:!0,item:!0,xs:12,children:n.slice(0,3).map((function(e){return Object(ze.jsxs)(ze.Fragment,{children:[Object(ze.jsx)(f.a,{item:!0,xs:1}),Object(ze.jsx)(f.a,{item:!0,xs:10,style:{marginBottom:30},children:Object(ze.jsx)(oa,{post:e})},e.id),Object(ze.jsx)(f.a,{item:!0,xs:1})]})}))}),Object(ze.jsx)(f.a,{item:!0,xs:12,style:{marginTop:20},children:Object(ze.jsx)(m.a,{align:"center",children:Object(ze.jsx)(h.b,{variant:"body2",onClick:l,children:"See more"})})})]}):Object(ze.jsx)(ze.Fragment,{children:!r&&Object(ze.jsx)("div",{style:{textAlign:"center"},children:Object(ze.jsx)(m.a,{variant:"subtitle1",children:"No post."})})})}),Object(ze.jsx)(sn.a,{style:{width:"100%",margin:20,padding:50,marginTop:80},children:Object(ze.jsxs)(f.a,{container:!0,item:!0,xs:12,children:[Object(ze.jsx)(f.a,{item:!0,xs:6,style:{display:"flex",justifyContent:"center"},children:Object(ze.jsx)("img",{alt:"chat",src:Hn,height:"250"})}),Object(ze.jsxs)(f.a,{item:!0,xs:6,style:{display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center"},children:[Object(ze.jsx)(m.a,{variant:"body1",children:"Your privacy is our priority."}),Object(ze.jsx)(m.a,{variant:"body1",children:"Housing an in-built chat function,"}),Object(ze.jsx)(m.a,{variant:"body1",children:"contacting each other has never been more hassle-free."})]})]})}),Object(ze.jsx)(f.a,{item:!0,xs:12,style:{marginTop:80},children:Object(ze.jsx)(Un,{})})]})})),da=n(3),ja=n(371),ha=n(372),ba=n(423),pa=n(424),ma=n(425),Oa=n(453),fa=n(427),ga=n(445),xa=n(61),va=n.n(xa),ya=n(127),Sa=n.n(ya),wa={getPostList:Lt,getUserPosts:It,searchPost:Ut,setPage:rn,setFilter:cn},Ca=Object(o.b)((function(e){return{user:e.auth.user,userHousingPosts:e.post.userHousingPosts,housingPosts:e.post.housingPosts,postLoading:e.post.postLoading,searchedPost:e.post.searchedPost,count:e.post.count,userHousingPostsCount:e.post.userHousingPostsCount,searchedPostCount:e.post.searchedPostCount,searchItem:e.post.searchItem,page:e.post.page,filter:e.post.filter}}),wa)((function(e){var t=e.user,n=e.postLoading,r=e.housingPosts,c=e.count,s=e.getPostList,o=e.userHousingPosts,l=e.userHousingPostsCount,u=e.getUserPosts,d=e.searchedPost,h=e.searchedPostCount,g=e.searchItem,x=e.searchPost,v=e.page,y=e.setPage,S=e.filter,w=e.setFilter,C=Object(b.a)((function(e){return{tooltip:{position:"fixed",bottom:e.spacing(2),right:e.spacing(3)},grid:{display:"flex",flexDirection:"column"}}}))(),_=Object(j.g)(),P=Object(a.useRef)(null),E=Object(a.useState)(!1),T=Object(i.a)(E,2),k=T[0],L=T[1],A=function(){L(!1)},I=function(){w(nt),y(1),L(!1),u(t.id,2)},N=function(){w(at),y(1),L(!1),s(2)},R=function(){y(1),L(!1),w("Filtering")};Object(a.useEffect)((function(){return s(2,v)}),[]),Object(a.useEffect)((function(){S===nt&&t&&u(t.id,2,v)}),[t]);var F=d||(S===nt?o:r),U=d?h:S===nt?l:c;return Object(ze.jsxs)("div",{children:[t&&Object(ze.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:20,marginLeft:30,marginRight:30},children:[Object(ze.jsx)(m.a,{variant:"h6",children:"Housing Dashboard"}),Object(ze.jsx)(O.a,{ref:P,onClick:function(){L(!0)},startIcon:Object(ze.jsx)(Sa.a,{}),style:{textDecoration:"none"},children:S}),Object(ze.jsx)(ja.a,{open:k,anchorEl:P.current,role:void 0,transition:!0,disablePortal:!0,placement:"bottom-end",style:{zIndex:1},children:function(e){var t=e.TransitionProps,n=e.placement;return Object(ze.jsx)(ha.a,Object(da.a)(Object(da.a)({},t),{},{style:{transformOrigin:"bottom"===n?"center bottom":"center top"},children:Object(ze.jsx)(sn.a,{children:Object(ze.jsx)(ba.a,{onClickAway:A,children:Object(ze.jsxs)(pa.a,{children:[Object(ze.jsx)(ma.a,{onClick:I,children:"My post(s)"}),Object(ze.jsx)(ma.a,{onClick:N,children:"All posts"}),Object(ze.jsx)(ma.a,{onClick:R,children:"Filter"})]})})})}))}})]}),0!==F.length?Object(ze.jsx)(p.a,{children:Object(ze.jsx)(f.a,{container:!0,spacing:2,children:F.map((function(e){return Object(ze.jsx)(f.a,{item:!0,xs:12,className:C.grid,children:Object(ze.jsx)(oa,{post:e,page:v})},e.id)}))})}):Object(ze.jsx)(ze.Fragment,{children:!n&&Object(ze.jsx)("div",{style:{textAlign:"center"},children:Object(ze.jsx)(m.a,{variant:"subtitle1",children:"No post."})})}),0!==F.length?Object(ze.jsx)(Oa.a,{style:{width:"100%",display:"flex",justifyContent:"center",marginTop:60},children:Object(ze.jsx)(ga.a,{color:"primary",count:Math.ceil(U/2),page:v,onChange:function(e,n){y(n),d?x(2,g,n):S===nt?u(t.id,2,n):s(2,n),window.scroll(0,0)}})}):null,t&&Object(ze.jsx)(Bn.a,{title:"",onClick:function(){_.push("/housing-form")},children:Object(ze.jsx)(fa.a,{color:"primary",className:C.tooltip,children:Object(ze.jsx)(va.a,{})})})]})})),_a=n(451),Pa=n(128),Ea=n.n(Pa);S.a.defaults.xsrfCookieName="csrftoken",S.a.defaults.xsrfHeaderName="X-CSRFToken";var Ta={login:function(e,t){return function(){var n=Object(v.a)(x.a.mark((function n(a){var r,c,s;return x.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return a(Ue()),r={headers:{"Content-Type":"application/json"}},c=JSON.stringify({email:e,password:t}),n.prev=3,n.next=6,S.a.post("/auth/jwt/create/",c,r);case 6:s=n.sent,a(Pe(s.data)),a(me()),n.next=14;break;case 11:n.prev=11,n.t0=n.catch(3),a(Ee(de));case 14:case"end":return n.stop()}}),n,null,[[3,11]])})));return function(e){return n.apply(this,arguments)}}()}},ka=Object(o.b)((function(e){return{isAuthenticated:e.auth.isAuthenticated,authLoading:e.auth.authLoading}}),Ta)((function(e){var t,n=e.isAuthenticated,r=e.authLoading,c=e.login,s=Object(b.a)((function(e){return{paper:{display:"flex",flexDirection:"column",alignItems:"center"},submit:{margin:e.spacing(3,0,2)}}}))(),o=Object(j.h)(),l=Object(a.useState)(""),u=Object(i.a)(l,2),d=u[0],m=u[1],g=Object(a.useState)(""),y=Object(i.a)(g,2),w=y[0],C=y[1],_=Object(a.useState)("tenant"),P=Object(i.a)(_,2),E=P[0],T=(P[1],Object(a.useState)(!1)),k=Object(i.a)(T,2),L=k[0],A=k[1],I=Object(a.useState)(!1),N=Object(i.a)(I,2),R=N[0],F=N[1],U=Object(a.useState)(!1),D=Object(i.a)(U,2),M=(D[0],D[1]),W=function(){var e=Object(v.a)(x.a.mark((function e(){var t;return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,S.a.get("/auth/o/google-oauth2/?redirect_uri=".concat("http://localhost:8000","/google"));case 3:t=e.sent,window.location.replace(t.data.authorization_url),e.next=9;break;case 7:e.prev=7,e.t0=e.catch(0);case 9:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(){return e.apply(this,arguments)}}();return n?(null===o||void 0===o||null===(t=o.state)||void 0===t?void 0:t.from)?Object(ze.jsx)(j.a,{to:o.state.from}):Object(ze.jsx)(j.a,{to:"/profile"}):Object(ze.jsx)(p.a,{maxWidth:"xs",children:Object(ze.jsx)("div",{className:s.paper,children:Object(ze.jsxs)("form",{noValidate:!0,onSubmit:function(e){e.preventDefault(),A(!1),F(!1),M(!1),""===d&&A(!0),""===w&&F(!0),""===E&&M(!0),d&&w&&E&&c(d,w),window.scroll(0,0)},children:[Object(ze.jsx)(_a.a,{variant:"outlined",margin:"normal",required:!0,fullWidth:!0,label:"Email",name:"email",autoFocus:!0,onChange:function(e){m(e.target.value),""===e.target.value?A(!0):A(!1)},error:L,helperText:L?"This is a required field":""}),Object(ze.jsx)(_a.a,{variant:"outlined",margin:"normal",required:!0,fullWidth:!0,name:"password",label:"Password",type:"password",onChange:function(e){C(e.target.value),""===e.target.value?F(!0):F(!1)},error:R,helperText:R?"This is a required field":""}),Object(ze.jsx)(O.a,{type:"submit",fullWidth:!0,variant:"contained",color:"primary",className:s.submit,disabled:r,children:"Login"}),Object(ze.jsx)("div",{className:s.paper,children:Object(ze.jsx)(Ea.a,{fullWidth:!0,className:"btn btn-danger mt-3",onClick:W,children:"Continue With Google"})}),Object(ze.jsx)("br",{}),Object(ze.jsxs)(f.a,{container:!0,children:[Object(ze.jsx)(f.a,{item:!0,xs:!0,children:Object(ze.jsx)(h.c,{to:"/reset-password",variant:"body2",children:"Forgot password?"})}),Object(ze.jsx)(f.a,{item:!0,children:Object(ze.jsx)(h.c,{to:"/register",variant:"body2",children:"Don't have an account? Register now!"})})]})]})})})})),La=n(49),Aa=n(432),Ia=n(455),Na=n(199),Ra=n.n(Na),Fa=n(82),Ua=n.n(Fa),Da=n(200),Ma=n.n(Da),Wa=n(131),qa=n.n(Wa),Ha=n(130),Ba=n.n(Ha),Ga=n(431),Ja=n(375),Qa=n.p+"static/media/roommates-button.977a8f19.png",za=n.p+"static/media/roommate-matchmake.8d1945c4.png",Ya=n.p+"static/media/dashboard.379e0bc1.png",Va=n.p+"static/media/housing2.6a2f69a4.jfif",Ka=r.a.forwardRef((function(e,t){return Object(ze.jsx)(Ja.a,Object(da.a)({direction:"up",ref:t},e))})),Xa=function(e){var t=e.user,n=e.editJustRegistered,c=r.a.useState(!0),s=Object(i.a)(c,2),o=(s[0],s[1],r.a.useState(!0)),l=Object(i.a)(o,2),u=l[0],d=(l[1],r.a.useState("lg")),j=Object(i.a)(d,2),h=j[0],p=(j[1],Object(a.useState)(0)),m=Object(i.a)(p,2),f=m[0],g=m[1],x=Object(b.a)((function(e){return{Card:{width:300,margin:"auto"},Media:{height:"auto",width:"90%",border:"2px solid #555"}}}))(),v=[{pic:Ya,text:"This is your own personalised dashboard, where you can have an overview of the whole website. Go ahead and customize your picture and bio as you wish!"},{pic:Qa,text:"Click on the add button to find your ideal housemate"},{pic:za,text:"Now you can see the results of the matchmaking algorithm as well as edit or delete your choices"},{pic:Hn,text:"Click on any of the posts for more details. Inside, you can click on the chat icon to contact the other person"},{pic:Va,text:"Add housing posts to your favourites via the heart icon! You can conveniently see them in the dashboard afterwards"}];return Object(ze.jsx)("div",{children:Object(ze.jsxs)(Vn.a,{open:t&&t.just_registered,TransitionComponent:Ka,keepMounted:!0,fullWidth:u,maxWidth:h,"aria-labelledby":"alert-dialog-slide-title","aria-describedby":"alert-dialog-slide-description",children:[Object(ze.jsx)(Kn.a,{id:"alert-dialog-slide-title",children:"Welcome to HouseMates!"}),Object(ze.jsxs)(Xn.a,{children:[Object(ze.jsx)("div",{align:"center",children:Object(ze.jsx)("img",{src:v[f].pic,className:x.Media})}),Object(ze.jsxs)(Ga.a,{id:"alert-dialog-slide-description",align:"center",variant:"h6",children:[f+1,". ",v[f].text]})]}),Object(ze.jsxs)(Zn.a,{children:[Object(ze.jsx)(O.a,{onClick:function(){g(f-1)},color:"primary",disabled:0===f,children:"Previous"}),Object(ze.jsx)(O.a,{color:"primary",onClick:function(){f===v.length-1?n(t.first_name,t.last_name,t.id,!1):g(f+1)},children:f===v.length-1?"Done":"Next"})]})]})})},Za={changeProfilePic:function(e,t,n,a){return function(){var r=Object(v.a)(x.a.mark((function r(c){var s,i,o,l,u;return x.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:c(De()),s=localStorage.getItem("access"),i={bucketName:"housematesorbital",dirName:"images",region:"us-east-2",accessKeyId:"AKIA2VQMUMOWCECPYUOU",secretAccessKey:"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"},o={headers:{"Content-Type":"application/json",Authorization:"JWT ".concat(s)}};try{C.a.uploadFile(a,i).then((function(n){u=n.location,l=JSON.stringify({first_name:e,last_name:t,profile_pic:u})})).then(Object(v.a)(x.a.mark((function e(){return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,S.a.patch("/accounts/profiles/".concat(n,"/"),l,o);case 2:c(Me(u));case 3:case"end":return e.stop()}}),e)})))).catch((function(e){return console.log(e)}))}catch(d){c(We("Unable to change profile pic"))}case 5:case"end":return r.stop()}}),r)})));return function(e){return r.apply(this,arguments)}}()},editBio:function(e,t,n,a){return function(){var r=Object(v.a)(x.a.mark((function r(c){var s,i,o;return x.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return c(De()),s=localStorage.getItem("access"),i={headers:{"Content-Type":"application/json",Authorization:"JWT ".concat(s)}},o=JSON.stringify({first_name:e,last_name:t,bio:a}),r.prev=4,r.next=7,S.a.patch("/accounts/profiles/".concat(n,"/"),o,i);case 7:c(qe()),r.next=13;break;case 10:r.prev=10,r.t0=r.catch(4),r.t0.response.data.bio?c(He("Bio cannot be empty")):c(He("Unable to edit bio"));case 13:case"end":return r.stop()}}),r,null,[[4,10]])})));return function(e){return r.apply(this,arguments)}}()},resetEditBioSuccess:function(){return{type:Z}},loadUser:pe,getPostDetail:At,getUserPosts:It,getRoomList:Cn,editJustRegistered:function(e,t,n,a){return function(){var r=Object(v.a)(x.a.mark((function r(c){var s,i,o;return x.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return s=localStorage.getItem("access"),i={headers:{"Content-Type":"application/json",Authorization:"JWT ".concat(s)}},o=JSON.stringify({first_name:e,last_name:t,just_registered:a}),r.prev=3,r.next=6,S.a.patch("/accounts/profiles/".concat(n,"/"),o,i);case 6:c(Je(a)),r.next=12;break;case 9:r.prev=9,r.t0=r.catch(3),c(Qe(r.t0));case 12:case"end":return r.stop()}}),r,null,[[3,9]])})));return function(e){return r.apply(this,arguments)}}()}},$a=Object(o.b)((function(e){return{isAuthenticated:e.auth.isAuthenticated,user:e.auth.user,editBioSuccess:e.auth.editBioSuccess,userRoommatePosts:e.post.userRoommatePosts,post:e.post.post,housingPost:e.post.housingPost,roomList:e.chat.roomList}}),Za)((function(e){var t=e.isAuthenticated,n=e.user,r=e.loadUser,c=e.changeProfilePic,s=e.editBio,o=e.editBioSuccess,l=e.resetEditBioSuccess,u=e.userRoommatePosts,d=e.getUserPosts,p=e.post,g=e.housingPost,x=e.getPostDetail,v=e.roomList,y=e.getRoomList,S=e.editJustRegistered,w=Object(b.a)((function(e){return{avatar:{height:200,width:200,marginBottom:20},content:{display:"flex",flexDirection:"column",alignItems:"center"},card:{width:"100%"}}}))(),C=Object(j.g)(),_=Object(a.useRef)(),P=Object(a.useState)(!1),E=Object(i.a)(P,2),T=E[0],k=E[1],L=Object(a.useState)(""),A=Object(i.a)(L,2),I=A[0],N=A[1],R=Object(a.useState)([]),F=Object(i.a)(R,2),U=F[0],D=F[1],M=Object(a.useState)([]),W=Object(i.a)(M,2),q=W[0],H=W[1],B=Object(a.useState)([]),G=Object(i.a)(B,2),J=G[0],Q=G[1],z=Object(a.useState)([]),Y=Object(i.a)(z,2),V=Y[0],K=Y[1];return Object(a.useEffect)((function(){r(),l()}),[o]),Object(a.useEffect)((function(){n&&(d(n.id,1),y(n.id))}),[n]),Object(a.useEffect)((function(){if(u.length>0){for(var e=Object.values(u[0].score_list).sort((function(e,t){return e.score>t.score||e.score===t.score&&e.post<t.post?-1:1})),t=[],n=0;n<3;n++)n<e.length&&t.push(e[n].post);D(t)}}),[u]),Object(a.useEffect)((function(){U.length>0&&q.length<U.length&&x(U[q.length])}),[U,q]),Object(a.useEffect)((function(){p&&p.id===U[q.length]&&H([].concat(Object(La.a)(q),[p]))}),[p]),Object(a.useEffect)((function(){(null===n||void 0===n?void 0:n.favourites.length)>0&&J.length<n.favourites.length&&x(n.favourites[J.length])}),[n,J]),Object(a.useEffect)((function(){g&&g.id===(null===n||void 0===n?void 0:n.favourites[J.length])&&Q([].concat(Object(La.a)(J),[g]))}),[g]),Object(a.useEffect)((function(){var e=v.slice(0,3).filter((function(e){return e.messages.reduce((function(e,t){return e||!t.hasRead&&t.user_id.toString()!==n.id.toString()}),!1)}));K(e)}),[v]),t?Object(ze.jsxs)(ze.Fragment,{children:[Object(ze.jsx)(Xa,{user:n,editJustRegistered:S}),Object(ze.jsx)("div",{className:w.card,children:n&&Object(ze.jsxs)(f.a,{container:!0,spacing:3,children:[Object(ze.jsxs)(f.a,{container:!0,item:!0,xs:12,spacing:3,children:[Object(ze.jsx)(f.a,{container:!0,item:!0,xs:12,md:8,children:Object(ze.jsxs)(sn.a,{style:{width:"100%",display:"flex",flexDirection:"row",padding:10,minWidth:320},children:[Object(ze.jsxs)(f.a,{item:!0,xs:12,md:5,align:"right",children:[Object(ze.jsx)(Aa.a,{overlap:"circle",anchorOrigin:{vertical:"bottom",horizontal:"right"},badgeContent:Object(ze.jsx)(Gn.a,{onClick:function(){_.current.click()},children:Object(ze.jsx)(Ra.a,{})}),children:Object(ze.jsx)(Ia.a,{className:w.avatar,src:n.profile_pic})}),Object(ze.jsx)("input",{type:"file",id:"image",accept:"image/png, image/jpeg",onChange:function(e){return function(e){c(n.first_name,n.last_name,n.id,e.target.files[0])}(e)},ref:_,style:{display:"none"}})]}),Object(ze.jsx)(f.a,{item:!0,xs:0,md:1}),Object(ze.jsxs)(f.a,{item:!0,xs:12,md:5,align:"center",children:[Object(ze.jsxs)(m.a,{variant:"h5",style:{marginTop:50},children:[n.first_name," ",n.last_name]}),Object(ze.jsx)(Oa.a,{mb:3,children:T?Object(ze.jsx)("form",{onSubmit:function(e){e.preventDefault(),s(n.first_name,n.last_name,n.id,I),k(!1)},children:Object(ze.jsxs)(f.a,{container:!0,children:[Object(ze.jsx)(f.a,{item:!0,xs:12,children:Object(ze.jsx)(_a.a,{variant:"outlined",placeholder:"Describe yourself...",defaultValue:n.bio,fullWidth:!0,multiline:!0,rows:3,onChange:function(e){N(e.target.value)}})}),Object(ze.jsxs)(f.a,{item:!0,xs:12,style:{display:"flex",justifyContent:"center",marginTop:8},children:[Object(ze.jsx)(O.a,{size:"small",onClick:function(){k(!1)},style:{marginRight:8},children:"Cancel"}),Object(ze.jsx)(O.a,{type:"submit",variant:"contained",color:"primary",size:"small",children:"Save"})]})]})}):n.bio?Object(ze.jsxs)("div",{style:{display:"flex",flexDirection:"column",alignItems:"center"},children:[Object(ze.jsx)(m.a,{variant:"body1",color:"textSecondary",children:n.bio}),Object(ze.jsx)(h.b,{variant:"body2",onClick:function(){k(!0)},children:"Edit"})]}):Object(ze.jsx)(h.b,{variant:"body2",onClick:function(){k(!0)},children:"Add bio..."})})]}),Object(ze.jsx)(f.a,{item:!0,xs:0,md:1})]})}),Object(ze.jsx)(f.a,{item:!0,xs:12,md:4,children:Object(ze.jsx)(sn.a,{style:{padding:20,height:200,minWidth:300},children:Object(ze.jsxs)(pa.a,{children:[Object(ze.jsxs)("span",{style:{display:"flex",alignItems:"center"},children:[Object(ze.jsx)(Ma.a,{style:{marginRight:10}}),Object(ze.jsx)(m.a,{variant:"h6",display:"inline",noWrap:!0,children:"Account Settings"})]}),Object(ze.jsx)(ma.a,{style:{marginLeft:-10},onClick:function(){C.push("/change-password")},children:Object(ze.jsx)(m.a,{noWrap:!0,children:"Change password"})}),Object(ze.jsx)(ma.a,{style:{marginLeft:-10},onClick:function(){C.push("/delete-account")},children:Object(ze.jsx)(m.a,{noWrap:!0,children:"Delete account"})})]})})})]}),Object(ze.jsxs)(f.a,{container:!0,item:!0,xs:12,spacing:3,children:[Object(ze.jsx)(f.a,{item:!0,xs:12,md:4,children:Object(ze.jsxs)(sn.a,{style:{padding:10,minWidth:320},children:[Object(ze.jsxs)("span",{style:{display:"flex",justifyContent:"center",alignItems:"center"},children:[Object(ze.jsx)(Ba.a,{style:{marginRight:10}}),Object(ze.jsx)(m.a,{variant:"h6",display:"inline",noWrap:!0,children:"Top 3 Roommates"})]}),0===q.length?Object(ze.jsx)(m.a,{variant:"body1",color:"textSecondary",align:"center",children:"Create posts to find your ideal roommates now!"}):q.map((function(e){var t;return Object(ze.jsx)(Fn,{name:e.owner.first_name+" "+e.owner.last_name,desc:e.owner.bio,pic:e.owner.profile_pic,scoreList:null===(t=u[0])||void 0===t?void 0:t.score_list,type:1,id:e.id},e.owner.id)}))]})}),Object(ze.jsx)(f.a,{item:!0,xs:12,md:4,children:Object(ze.jsxs)(sn.a,{style:{padding:10,minWidth:320},children:[Object(ze.jsxs)("span",{style:{display:"flex",justifyContent:"center",alignItems:"center"},children:[Object(ze.jsx)(qa.a,{style:{marginRight:10}}),Object(ze.jsx)(m.a,{variant:"h6",display:"inline",noWrap:!0,children:"Starred Housings"})]}),0===J.length?Object(ze.jsx)(m.a,{variant:"body1",color:"textSecondary",align:"center",children:"No starred housings."}):J.map((function(e){return Object(ze.jsx)(Fn,{name:e.selected_choices[0][0].choice,desc:e.selected_choices[0][1].choice,pic:e.images[0],type:2,id:e.id},e.id)}))]})}),Object(ze.jsx)(f.a,{item:!0,xs:12,md:4,children:Object(ze.jsxs)(sn.a,{style:{padding:10,minWidth:320},children:[Object(ze.jsxs)("span",{style:{display:"flex",justifyContent:"center",alignItems:"center"},children:[Object(ze.jsx)(Ua.a,{style:{marginRight:10}}),Object(ze.jsx)(m.a,{variant:"h6",display:"inline",noWrap:!0,children:"New messages"})]}),0===V.length?Object(ze.jsx)(m.a,{variant:"body1",color:"textSecondary",align:"center",children:"No new messages."}):Object(ze.jsx)(ze.Fragment,{children:V.map((function(e){return Object(ze.jsx)(Fn,{chatUser:n.id===e.owner1.id?e.owner2:e.owner1,name:n.id===e.owner1.id?e.owner2.first_name+" "+e.owner2.last_name:e.owner1.first_name+" "+e.owner1.last_name,desc:e.messages[e.messages.length-1].message,pic:n.id===e.owner1.id?e.owner2.profile_pic:e.owner1.profile_pic,unreadMsgs:e.messages.reduce((function(e,t){return e+(t.hasRead||t.user_id.toString()===n.id.toString()?0:1)}),0)},e.id)}))})]})})]})]})})]}):Object(ze.jsx)(j.a,{to:"/login"})}));S.a.defaults.xsrfCookieName="csrftoken",S.a.defaults.xsrfHeaderName="X-CSRFToken";var er={register:function(e,t,n,a,r){return function(){var c=Object(v.a)(x.a.mark((function c(s){var i,o;return x.a.wrap((function(c){for(;;)switch(c.prev=c.next){case 0:return s(Ue()),i={headers:{"Content-Type":"application/json"}},o=JSON.stringify({first_name:e,last_name:t,email:n,password:a,re_password:r}),c.prev=3,c.next=6,S.a.post("/auth/users/",o,i);case 6:s(Oe()),c.next=12;break;case 9:c.prev=9,c.t0=c.catch(3),c.t0.response.data.password?s(fe("Password too weak")):c.t0.response.data.email?s(fe("User already exists")):s(fe("Unable to register"));case 12:case"end":return c.stop()}}),c,null,[[3,9]])})));return function(e){return c.apply(this,arguments)}}()}},tr=Object(o.b)((function(e){return{isAuthenticated:e.auth.isAuthenticated,authLoading:e.auth.authLoading,registrationSuccess:e.auth.registrationSuccess}}),er)((function(e){var t=e.isAuthenticated,n=e.authLoading,r=e.registrationSuccess,c=e.register,s=Object(b.a)((function(e){return{paper:{display:"flex",flexDirection:"column",alignItems:"center"},submit:{margin:e.spacing(3,0,2)}}}))(),o=Object(a.useState)(""),l=Object(i.a)(o,2),u=l[0],d=l[1],g=Object(a.useState)(""),y=Object(i.a)(g,2),w=y[0],C=y[1],_=Object(a.useState)(""),P=Object(i.a)(_,2),E=P[0],T=P[1],k=Object(a.useState)(""),L=Object(i.a)(k,2),A=L[0],I=L[1],N=Object(a.useState)(""),R=Object(i.a)(N,2),F=R[0],U=R[1],D=Object(a.useState)("tenant"),M=Object(i.a)(D,2),W=M[0],q=(M[1],Object(a.useState)(!1)),H=Object(i.a)(q,2),B=H[0],G=H[1],J=Object(a.useState)(!1),Q=Object(i.a)(J,2),z=Q[0],Y=Q[1],V=Object(a.useState)(!1),K=Object(i.a)(V,2),X=K[0],Z=K[1],$=Object(a.useState)(!1),ee=Object(i.a)($,2),te=ee[0],ne=ee[1],ae=Object(a.useState)(!1),re=Object(i.a)(ae,2),ce=re[0],se=re[1],ie=Object(a.useState)(!1),oe=Object(i.a)(ie,2),le=oe[0],ue=oe[1],de=Object(a.useState)(!1),je=Object(i.a)(de,2),he=(je[0],je[1]),be=function(){var e=Object(v.a)(x.a.mark((function e(){var t;return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,S.a.get("/auth/o/google-oauth2/?redirect_uri=".concat("http://localhost:8000","/google"));case 3:t=e.sent,window.location.replace(t.data.authorization_url),e.next=9;break;case 7:e.prev=7,e.t0=e.catch(0);case 9:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(){return e.apply(this,arguments)}}();return t?Object(ze.jsx)(j.a,{to:"/"}):Object(ze.jsx)(p.a,{maxWidth:"xs",children:Object(ze.jsx)("div",{className:s.paper,children:r?Object(ze.jsxs)("div",{children:[Object(ze.jsx)(m.a,{variant:"h6",noWrap:!0,style:{textAlign:"center"},children:"Thank you for your registration."}),Object(ze.jsx)(m.a,{variant:"h6",noWrap:!0,style:{textAlign:"center"},children:"Kindly check your email for account verification to complete the registration process."}),Object(ze.jsx)(m.a,{variant:"h6",noWrap:!0,style:{textAlign:"center"},children:"You may close this window."})]}):Object(ze.jsxs)("form",{noValidate:!0,onSubmit:function(e){e.preventDefault(),Y(!1),G(!1),Z(!1),ne(!1),se(!1),ue(!1),he(!1),""===w&&Y(!0),""===u&&G(!0),""===E&&Z(!0),""===A&&ne(!0),""===F&&se(!0),F!==A&&ue(!0),""===W&&he(!0),w&&u&&E&&A&&F&&!le&&W&&c(w,u,E,A,F),window.scroll(0,0)},children:[Object(ze.jsxs)(f.a,{container:!0,spacing:2,children:[Object(ze.jsx)(f.a,{item:!0,xs:12,sm:6,children:Object(ze.jsx)(_a.a,{variant:"outlined",required:!0,fullWidth:!0,label:"First Name",name:"firstName",margin:"normal",autoFocus:!0,onChange:function(e){C(e.target.value),""===e.target.value?Y(!0):Y(!1)},error:z,helperText:z?"This is a required field":""})}),Object(ze.jsx)(f.a,{item:!0,xs:12,sm:6,children:Object(ze.jsx)(_a.a,{variant:"outlined",required:!0,fullWidth:!0,label:"Last Name",name:"lastName",margin:"normal",onChange:function(e){d(e.target.value),""===e.target.value?G(!0):G(!1)},error:B,helperText:B?"This is a required field":""})})]}),Object(ze.jsx)(_a.a,{variant:"outlined",required:!0,fullWidth:!0,label:"Email Address",name:"email",type:"email",margin:"normal",onChange:function(e){T(e.target.value),""===e.target.value?Z(!0):Z(!1)},error:X,helperText:X?"This is a required field":""}),Object(ze.jsx)(_a.a,{variant:"outlined",required:!0,fullWidth:!0,name:"password",label:"Password",type:"password",margin:"normal",onChange:function(e){I(e.target.value),""===e.target.value?(ne(!0),ue(!1)):F&&e.target.value!==F?(ue(!0),ne(!1)):(ne(!1),ue(!1))},error:te,helperText:te?"This is a required field":"Minimum 8 characters with a mixture of lower and upper case letters, numbers and symbols"}),Object(ze.jsx)(_a.a,{variant:"outlined",required:!0,fullWidth:!0,name:"confirmPassword",label:"Confirm Password",type:"password",margin:"normal",onChange:function(e){U(e.target.value),""===e.target.value?(se(!0),ue(!1)):e.target.value!==A?(ue(!0),se(!1)):(se(!1),ue(!1))},error:ce||le,helperText:ce?"This is a required field":le?"Password does not match":""}),Object(ze.jsx)(O.a,{type:"submit",fullWidth:!0,variant:"contained",color:"primary",className:s.submit,disabled:n,children:"Register"}),Object(ze.jsx)(f.a,{container:!0,justify:"flex-end",children:Object(ze.jsx)(f.a,{item:!0,children:Object(ze.jsx)(h.c,{to:"/login",variant:"body2",children:"Already have an account? Login"})})}),Object(ze.jsx)("br",{}),Object(ze.jsx)("div",{className:s.paper,children:Object(ze.jsx)(Ea.a,{fullWidth:!0,className:"btn btn-danger mt-3",onClick:be,children:"Continue With Google"})})]})})})})),nr={changePassword:function(e,t,n){return function(){var a=Object(v.a)(x.a.mark((function a(r){var c,s,i;return x.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return r(Ue()),c=localStorage.getItem("access"),s={headers:{"Content-Type":"application/json",Authorization:"JWT ".concat(c)}},i=JSON.stringify({current_password:e,new_password:t,re_new_password:n}),a.prev=4,a.next=7,S.a.post("/auth/users/set_password/",i,s);case 7:r(Re()),a.next=13;break;case 10:a.prev=10,a.t0=a.catch(4),a.t0.response.data.current_password?r(Fe("Incorrect current password")):a.t0.response.data.new_password?r(Fe(be)):r(Fe("Unable to change password"));case 13:case"end":return a.stop()}}),a,null,[[4,10]])})));return function(e){return a.apply(this,arguments)}}()},resetChangePasswordSuccess:function(){return function(e){return e({type:X})}}},ar=Object(o.b)((function(e){return{authLoading:e.auth.authLoading,changePasswordSuccess:e.auth.changePasswordSuccess}}),nr)((function(e){var t=e.authLoading,n=e.changePasswordSuccess,r=e.changePassword,c=e.resetChangePasswordSuccess,s=Object(b.a)((function(e){return{paper:{display:"flex",flexDirection:"column",alignItems:"center"},submit:{margin:e.spacing(3,0,2)}}}))(),o=Object(j.g)(),l=Object(a.useState)(""),u=Object(i.a)(l,2),d=u[0],h=u[1],f=Object(a.useState)(""),g=Object(i.a)(f,2),x=g[0],v=g[1],y=Object(a.useState)(""),S=Object(i.a)(y,2),w=S[0],C=S[1],_=Object(a.useState)(!1),P=Object(i.a)(_,2),E=P[0],T=P[1],k=Object(a.useState)(!1),L=Object(i.a)(k,2),A=L[0],I=L[1],N=Object(a.useState)(!1),R=Object(i.a)(N,2),F=R[0],U=R[1],D=Object(a.useState)(!1),M=Object(i.a)(D,2),W=M[0],q=M[1];return Object(ze.jsx)(p.a,{maxWidth:"xs",children:Object(ze.jsx)("div",{className:s.paper,children:n?Object(ze.jsxs)("form",{onSubmit:function(e){e.preventDefault(),o.go(-1),c()},children:[Object(ze.jsx)(m.a,{variant:"h6",noWrap:!0,style:{textAlign:"center"},children:"You have successfully changed your password."}),Object(ze.jsx)(O.a,{autoFocus:!0,type:"submit",fullWidth:!0,variant:"contained",color:"primary",className:s.button,children:"Back to Profile"})]}):Object(ze.jsxs)("form",{noValidate:!0,onSubmit:function(e){e.preventDefault(),T(!1),I(!1),U(!1),q(!1),""===d&&T(!0),""===x&&I(!0),""===w&&U(!0),w!==x&&q(!0),d&&x&&w&&!W&&r(d,x,w),window.scroll(0,0)},children:[Object(ze.jsx)(_a.a,{variant:"outlined",margin:"normal",required:!0,fullWidth:!0,label:"Current Password",name:"currentPassword",type:"password",autoFocus:!0,onChange:function(e){h(e.target.value),""===e.target.value?T(!0):T(!1)},error:E,helperText:E?"This is a required field":""}),Object(ze.jsx)(_a.a,{variant:"outlined",margin:"normal",required:!0,fullWidth:!0,label:"New Password",name:"newPassword",type:"password",onChange:function(e){v(e.target.value),""===e.target.value?(I(!0),q(!1)):w&&e.target.value!==w?(q(!0),I(!1)):(I(!1),q(!1))},error:A,helperText:A?"This is a required field":"Minimum 8 characters with a mixture of lower and upper case letters, numbers and symbols"}),Object(ze.jsx)(_a.a,{variant:"outlined",margin:"normal",required:!0,fullWidth:!0,label:"Confim New Password",name:"confirmNewPassword",type:"password",onChange:function(e){C(e.target.value),""===e.target.value?(U(!0),q(!1)):e.target.value!==x?(q(!0),U(!1)):(U(!1),q(!1))},error:F||W,helperText:F?"This is a required field":W?"Password does not match":""}),Object(ze.jsx)(O.a,{type:"submit",fullWidth:!0,variant:"contained",color:"primary",className:s.submit,disabled:t,children:"Change Password"})]})})})})),rr={deleteAccount:function(e){return function(){var t=Object(v.a)(x.a.mark((function t(n){var a,r;return x.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n(Ue()),!(a=localStorage.getItem("access"))){t.next=15;break}return r={data:JSON.stringify({current_password:e}),headers:{"Content-Type":"application/json",Authorization:"JWT ".concat(a)}},t.prev=4,t.next=7,S.a.delete("/auth/users/me/",r);case 7:n(Te()),t.next=13;break;case 10:t.prev=10,t.t0=t.catch(4),t.t0.response.data.current_password?n(ke(de)):n(ke(je));case 13:t.next=16;break;case 15:n(ke(je));case 16:case"end":return t.stop()}}),t,null,[[4,10]])})));return function(e){return t.apply(this,arguments)}}()}},cr=Object(o.b)((function(e){return{authLoading:e.auth.authLoading,deleteAccountSuccess:e.auth.deleteAccountSuccess}}),rr)((function(e){var t=e.authLoading,n=e.deleteAccountSuccess,r=e.deleteAccount,c=Object(b.a)((function(e){return{paper:{display:"flex",flexDirection:"column",alignItems:"center"},buttons:{margin:e.spacing(3,0,2)}}}))(),s=Object(j.g)(),o=Object(a.useState)(""),l=Object(i.a)(o,2),u=l[0],d=l[1],h=Object(a.useState)(!1),g=Object(i.a)(h,2),x=g[0],v=g[1];return Object(ze.jsx)(p.a,{maxWidth:"xs",children:Object(ze.jsx)("div",{className:c.paper,children:n?Object(ze.jsxs)("div",{children:[Object(ze.jsx)(m.a,{variant:"h6",noWrap:!0,style:{textAlign:"center"},children:"You have successfully deleted your account."}),Object(ze.jsx)(m.a,{variant:"h6",noWrap:!0,style:{textAlign:"center"},children:"You may close this window."})]}):Object(ze.jsxs)("form",{noValidate:!0,onSubmit:function(e){e.preventDefault(),v(!1),""===u&&v(!0),u&&r(u)},children:[Object(ze.jsx)(_a.a,{variant:"outlined",margin:"normal",required:!0,fullWidth:!0,label:"Password",name:"password",type:"password",autoFocus:!0,onChange:function(e){d(e.target.value),""===e.target.value?v(!0):v(!1)},error:x,helperText:x?"This is a required field":""}),Object(ze.jsxs)(f.a,{container:!0,spacing:2,className:c.buttons,children:[Object(ze.jsx)(f.a,{item:!0,xs:12,sm:6,children:Object(ze.jsx)(O.a,{fullWidth:!0,onClick:function(){return s.go(-1)},children:"Cancel"})}),Object(ze.jsx)(f.a,{item:!0,xs:12,sm:6,children:Object(ze.jsx)(O.a,{type:"submit",fullWidth:!0,variant:"contained",color:"primary",disabled:t,children:"Delete"})})]})]})})})})),sr={resendActivationEmail:function(e){return function(){var t=Object(v.a)(x.a.mark((function t(n){var a,r;return x.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n(Ue()),a={headers:{"Content-Type":"application/json"}},r=JSON.stringify({email:e}),t.prev=3,t.next=6,S.a.post("/auth/users/resend_activation/",r,a);case 6:n(ve()),t.next=12;break;case 9:t.prev=9,t.t0=t.catch(3),n(ye("User does not exists or user has already successfully activated account"));case 12:case"end":return t.stop()}}),t,null,[[3,9]])})));return function(e){return t.apply(this,arguments)}}()}},ir=Object(o.b)((function(e){return{authLoading:e.auth.authLoading,resendActivationEmailSuccess:e.auth.resendActivationEmailSuccess}}),sr)((function(e){var t=e.authLoading,n=e.resendActivationEmailSuccess,r=e.resendActivationEmail,c=Object(b.a)((function(e){return{paper:{display:"flex",flexDirection:"column",alignItems:"center"},buttons:{margin:e.spacing(3,0,2)}}}))(),s=Object(j.g)(),o=Object(a.useState)(""),l=Object(i.a)(o,2),u=l[0],d=l[1],h=Object(a.useState)(!1),g=Object(i.a)(h,2),x=g[0],v=g[1];return Object(ze.jsx)(p.a,{maxWidth:"xs",children:Object(ze.jsx)("div",{className:c.paper,children:n?Object(ze.jsxs)("div",{children:[Object(ze.jsx)(m.a,{variant:"h6",noWrap:!0,style:{textAlign:"center"},children:"Kindly check your email for the activation email."}),Object(ze.jsx)(m.a,{variant:"h6",noWrap:!0,style:{textAlign:"center"},children:"You may close this window."})]}):Object(ze.jsxs)("form",{noValidate:!0,onSubmit:function(e){e.preventDefault(),v(!1),""===u&&v(!0),u&&r(u)},children:[Object(ze.jsx)(_a.a,{variant:"outlined",margin:"normal",required:!0,fullWidth:!0,label:"Email",name:"email",autoFocus:!0,onChange:function(e){d(e.target.value),""===e.target.value?v(!0):v(!1)},error:x,helperText:x?"This is a required field":""}),Object(ze.jsxs)(f.a,{container:!0,spacing:2,className:c.buttons,children:[Object(ze.jsx)(f.a,{item:!0,xs:12,sm:6,children:Object(ze.jsx)(O.a,{type:"button",fullWidth:!0,onClick:function(){return s.go(-1)},children:"Cancel"})}),Object(ze.jsx)(f.a,{item:!0,xs:12,sm:6,children:Object(ze.jsx)(O.a,{type:"submit",fullWidth:!0,variant:"contained",color:"primary",disabled:t,children:"Submit"})})]})]})})})})),or={resetPassword:function(e){return function(){var t=Object(v.a)(x.a.mark((function t(n){var a,r;return x.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n(Ue()),a={headers:{"Content-Type":"application/json"}},r=JSON.stringify({email:e}),t.prev=3,t.next=6,S.a.post("/auth/users/reset_password/",r,a);case 6:n(Le()),t.next=12;break;case 9:t.prev=9,t.t0=t.catch(3),t.t0.response.data?n(Ae("User does not exist")):n(Ae(he));case 12:case"end":return t.stop()}}),t,null,[[3,9]])})));return function(e){return t.apply(this,arguments)}}()}},lr=Object(o.b)((function(e){return{authLoading:e.auth.authLoading,resetPasswordSuccess:e.auth.resetPasswordSuccess}}),or)((function(e){var t=e.authLoading,n=e.resetPasswordSuccess,r=e.resetPassword,c=Object(b.a)((function(e){return{paper:{display:"flex",flexDirection:"column",alignItems:"center"},buttons:{margin:e.spacing(3,0,2)}}}))(),s=Object(j.g)(),o=Object(a.useState)(""),l=Object(i.a)(o,2),u=l[0],d=l[1],h=Object(a.useState)(!1),g=Object(i.a)(h,2),x=g[0],v=g[1];return Object(ze.jsx)(p.a,{maxWidth:"xs",children:Object(ze.jsx)("div",{className:c.paper,children:n?Object(ze.jsxs)("div",{children:[Object(ze.jsx)(m.a,{variant:"h6",noWrap:!0,style:{textAlign:"center"},children:"Kindly check your email to reset your password."}),Object(ze.jsx)(m.a,{variant:"h6",noWrap:!0,style:{textAlign:"center"},children:"You may close this window."})]}):Object(ze.jsxs)("form",{noValidate:!0,onSubmit:function(e){e.preventDefault(),v(!1),""===u&&v(!0),u&&r(u)},children:[Object(ze.jsx)(_a.a,{variant:"outlined",margin:"normal",required:!0,fullWidth:!0,label:"Email",name:"email",autoFocus:!0,onChange:function(e){d(e.target.value),""===e.target.value?v(!0):v(!1)},error:x,helperText:x?"This is a required field":""}),Object(ze.jsxs)(f.a,{container:!0,spacing:2,className:c.buttons,children:[Object(ze.jsx)(f.a,{item:!0,xs:12,sm:6,children:Object(ze.jsx)(O.a,{type:"button",fullWidth:!0,onClick:function(){return s.go(-1)},children:"Cancel"})}),Object(ze.jsx)(f.a,{item:!0,xs:12,sm:6,children:Object(ze.jsx)(O.a,{type:"submit",fullWidth:!0,variant:"contained",color:"primary",disabled:t,children:"Submit"})})]})]})})})})),ur={resetPasswordConfirm:function(e,t,n,a){return function(){var r=Object(v.a)(x.a.mark((function r(c){var s,i;return x.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return c(Ue()),s={headers:{"Content-Type":"application/json"}},i=JSON.stringify({uid:e,token:t,new_password:n,re_new_password:a}),r.prev=3,r.next=6,S.a.post("/auth/users/reset_password_confirm/",i,s);case 6:c(Ie()),r.next=12;break;case 9:r.prev=9,r.t0=r.catch(3),r.t0.response.data.uid||r.t0.response.data.token?c(Ne("Expired reset password token")):r.t0.response.data.new_password?c(Ae(be)):c(Ne(he));case 12:case"end":return r.stop()}}),r,null,[[3,9]])})));return function(e){return r.apply(this,arguments)}}()}},dr=Object(o.b)((function(e){return{authLoading:e.auth.authLoading,resetPasswordConfirmSuccess:e.auth.resetPasswordConfirmSuccess}}),ur)((function(e){var t=e.authLoading,n=e.resetPasswordConfirmSuccess,r=e.resetPasswordConfirm,c=Object(b.a)((function(e){return{paper:{display:"flex",flexDirection:"column",alignItems:"center"},submit:{margin:e.spacing(3,0,2)},buttons:{margin:e.spacing(3,0,2)}}}))(),s=Object(j.g)(),o=Object(j.i)(),l=o.uid,u=o.token,d=Object(a.useState)(""),h=Object(i.a)(d,2),f=h[0],g=h[1],x=Object(a.useState)(""),v=Object(i.a)(x,2),y=v[0],S=v[1],w=Object(a.useState)(!1),C=Object(i.a)(w,2),_=C[0],P=C[1],E=Object(a.useState)(!1),T=Object(i.a)(E,2),k=T[0],L=T[1],A=Object(a.useState)(!1),I=Object(i.a)(A,2),N=I[0],R=I[1];return Object(ze.jsx)(p.a,{maxWidth:"xs",children:Object(ze.jsx)("div",{className:c.paper,children:n?Object(ze.jsxs)("form",{onSubmit:function(e){e.preventDefault(),s.push("/login")},children:[Object(ze.jsx)(m.a,{variant:"h6",noWrap:!0,style:{textAlign:"center"},children:"You have successfully reset your password."}),Object(ze.jsx)(O.a,{type:"submit",fullWidth:!0,variant:"contained",color:"primary",className:c.button,autoFocus:!0,children:"Proceed to Login"})]}):Object(ze.jsxs)("form",{noValidate:!0,onSubmit:function(e){e.preventDefault(),P(!1),L(!1),R(!1),""===f&&P(!0),""===y&&L(!0),y!==f&&R(!0),f&&y&&!N&&r(l,u,f,y)},children:[Object(ze.jsx)(_a.a,{variant:"outlined",margin:"normal",required:!0,fullWidth:!0,label:"New Password",name:"newPassword",type:"password",autoFocus:!0,onChange:function(e){g(e.target.value),""===e.target.value?(P(!0),R(!1)):y&&e.target.value!==y?(R(!0),P(!1)):(P(!1),R(!1))},error:_,helperText:_?"This is a required field":"Minimum 8 characters with a mixture of lower and upper case letters, numbers and symbols"}),Object(ze.jsx)(_a.a,{variant:"outlined",margin:"normal",required:!0,fullWidth:!0,label:"Confim New Password",name:"confirmNewPassword",type:"password",onChange:function(e){S(e.target.value),""===e.target.value?(L(!0),R(!1)):e.target.value!==f?(R(!0),L(!1)):(L(!1),R(!1))},error:k||N,helperText:k?"This is a required field":N?"Password does not match":""}),Object(ze.jsx)(O.a,{type:"submit",fullWidth:!0,variant:"contained",color:"primary",className:c.submit,disabled:t,children:"Reset Password"})]})})})})),jr=n(433),hr=n(132),br=n.n(hr),pr="GET_QUESTIONS_SUCCESS",mr="GET_QUESTIONS_FAIL",Or="FORM_LOADING",fr="RESET_FORM_LOADING",gr="RESET_FORM_ERROR_MSG";S.a.defaults.xsrfCookieName="csrftoken",S.a.defaults.xsrfHeaderName="X-CSRFToken";var xr=function(e){return function(){var t=Object(v.a)(x.a.mark((function t(n){var a,r;return x.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n(Sr()),a={headers:{"Content-Type":"application/json"}},t.prev=2,t.next=5,S.a.get("/form/question-list/?form_type=".concat(e),a);case 5:r=t.sent,n(vr(e,r.data)),t.next=12;break;case 9:t.prev=9,t.t0=t.catch(2),n(yr(e,"Unable to load questions"));case 12:case"end":return t.stop()}}),t,null,[[2,9]])})));return function(e){return t.apply(this,arguments)}}()},vr=function(e,t){return{type:pr,payload:{formType:e,questions:t}}},yr=function(e,t){return{type:mr,payload:{formType:e,formErrorMsg:t}}},Sr=function(){return{type:Or}},wr={getQuestions:xr,getPostDetail:At,getUserPosts:It,setChatUser:Nn},Cr=Object(o.b)((function(e){return{user:e.auth.user,userPost:e.post.userPost,post:e.post.post,roommateCategories:e.form.roommateCategories,prevPath:e.auth.prevPath}}),wr)((function(e){var t=e.user,n=e.userPost,r=e.getUserPosts,c=e.post,s=e.getPostDetail,i=e.roommateCategories,o=e.getQuestions,l=e.prevPath,u=e.setChatUser,d=Object(b.a)((function(e){return{avatar:{height:200,width:200,marginBottom:20},content:{display:"flex",flexDirection:"column",alignItems:"center"},tag:{marginRight:5,marginTop:5},category:{marginBottom:30},card:{width:"100%",marginLeft:23,marginRight:23},tooltip:{position:"fixed",bottom:e.spacing(2),right:e.spacing(3)}}}))(),h=Object(j.g)(),p=Object(j.i)().id;return Object(a.useEffect)((function(){0===i.length&&o(1),s(p)}),[]),Object(a.useEffect)((function(){return t?r(t.id):null}),[t]),Object(ze.jsx)("div",{className:d.card,children:(null===c||void 0===c?void 0:c.id.toString())===p.toString()?Object(ze.jsxs)(ze.Fragment,{children:[Object(ze.jsxs)(on.a,{children:[Object(ze.jsx)(jr.a,{avatar:Object(ze.jsx)(Gn.a,{onClick:function(){h.push(l)},children:Object(ze.jsx)(br.a,{})})}),Object(ze.jsxs)(dn.a,{className:d.content,children:[Object(ze.jsx)(Ia.a,{className:d.avatar,src:c.owner.profile_pic}),Object(ze.jsxs)("span",{style:{display:"flex",justifyContent:"center",alignItems:"center"},children:[Object(ze.jsxs)(m.a,{variant:"h5",display:"inline",children:[c.owner.first_name," ",c.owner.last_name]}),t&&t.id!==c.owner.id&&Object(ze.jsx)(Gn.a,{style:{marginLeft:5},onClick:function(){u(c.owner),h.push("/chat")},children:Object(ze.jsx)(Ua.a,{})})]}),Object(ze.jsx)(m.a,{variant:"body2",color:"textSecondary",className:d.category,children:"Looking for roommates who are:"}),Object(ze.jsx)("div",{children:c.selected_choices.map((function(e,t){return Object(ze.jsxs)("div",{className:d.category,children:[Object(ze.jsx)(m.a,{variant:"body1",color:"textPrimary",gutterBottom:!0,children:i[t]}),e.map((function(e){return Array.isArray(e.otherChoice)?e.otherChoice.map((function(e){return Object(ze.jsx)(jn.a,{className:d.tag,label:e,color:"primary"},e)})):Object(ze.jsx)(jn.a,{className:d.tag,label:e.otherChoice,color:"primary"},e)}))]},e)}))})]})]}),t&&0===(null===n||void 0===n?void 0:n.length)&&Object(ze.jsx)(Bn.a,{title:"",onClick:function(){h.push("/roommate-form")},children:Object(ze.jsx)(fa.a,{color:"primary",className:d.tooltip,children:Object(ze.jsx)(va.a,{})})})]}):null})})),_r=n(429),Pr=n(430),Er=n(434),Tr=n(435),kr=n(448),Lr=n(376),Ar=n(450),Ir=n(456),Nr=n(436),Rr=n(449),Fr={getQuestions:xr,createPost:Nt,editPost:Rt,resetCreatePostSuccess:Xt,resetEditPostSuccess:Zt,getUserPosts:It,getPostList:Lt},Ur=Object(o.b)((function(e){return{isAuthenticated:e.auth.isAuthenticated,user:e.auth.user,roommateQuestions:e.form.roommateQuestions,roommateCategories:e.form.roommateCategories,createPostSuccess:e.post.createPostSuccess,editPostSuccess:e.post.editPostSuccess}}),Fr)((function(e){var t=e.user,n=e.getQuestions,r=e.roommateQuestions,c=e.getPostList,s=e.roommateCategories,o=e.createPost,l=e.createPostSuccess,u=e.resetCreatePostSuccess,d=e.editPost,h=e.editPostSuccess,p=e.resetEditPostSuccess,g=e.initialFormFields,x=e.id,v=Object(b.a)((function(e){return{paper:{padding:30,paddingBottom:50,marginLeft:23,marginRight:23},flex:{display:"flex",flexDirection:"column",alignItems:"center"},category:{marginBottom:10},active:{background:e.palette.action.hover}}}))(),y=Object(j.g)(),S=["Irrelevant","A little important","Somewhat important","Very important","Mandatory"],w=Object(a.useState)({}),C=Object(i.a)(w,2),_=C[0],P=C[1],E=Object(a.useState)(0),T=Object(i.a)(E,2),k=T[0],L=T[1],A=Object(a.useState)(0),I=Object(i.a)(A,2),N=I[0],R=I[1],F=Object(a.useState)({}),U=Object(i.a)(F,2),D=U[0],M=U[1],W=Object(a.useState)(!1),q=Object(i.a)(W,2),H=q[0],B=q[1],G=function(){window.scrollTo(0,0),L((function(e){return e-1}))},J=function(e){return function(){return e<=N?L(e):null}},Q=function(e,t,n,a){var r,c,s,i,o,l,u,d,j;switch(n){case Xe:switch(a){case et:P(Object(da.a)(Object(da.a)({},_),{},Object(aa.a)({},t,Object(da.a)(Object(da.a)({},_[t]),{},Object(aa.a)({},e.target.name,Object(da.a)(Object(da.a)({},null===(r=_[t])||void 0===r?void 0:r[e.target.name]),{},{question:e.target.name,myChoice:e.target.value}))))));break;case tt:P(Object(da.a)(Object(da.a)({},_),{},Object(aa.a)({},t,Object(da.a)(Object(da.a)({},_[t]),{},Object(aa.a)({},e.target.name,Object(da.a)(Object(da.a)({},null===(c=_[t])||void 0===c?void 0:c[e.target.name]),{},{otherChoice:e.target.value}))))))}break;case Ze:switch(a){case et:var h=(null===(s=_[t])||void 0===s||null===(i=s[e.target.name])||void 0===i?void 0:i.myChoice)||[];(null===h||void 0===h?void 0:h.includes(e.target.value))?h.splice(h.indexOf(e.target.value),1):h.push(e.target.value),P(Object(da.a)(Object(da.a)({},_),{},Object(aa.a)({},t,Object(da.a)(Object(da.a)({},_[t]),{},Object(aa.a)({},e.target.name,Object(da.a)(Object(da.a)({},null===(o=_[t])||void 0===o?void 0:o[e.target.name]),{},{question:e.target.name,myChoice:h}))))));break;case tt:var b=(null===(l=_[t])||void 0===l||null===(u=l[e.target.name])||void 0===u?void 0:u.otherChoice)||[];(null===b||void 0===b?void 0:b.includes(e.target.value))?b.splice(b.indexOf(e.target.value),1):b.push(e.target.value),P(Object(da.a)(Object(da.a)({},_),{},Object(aa.a)({},t,Object(da.a)(Object(da.a)({},_[t]),{},Object(aa.a)({},e.target.name,Object(da.a)(Object(da.a)({},null===(d=_[t])||void 0===d?void 0:d[e.target.name]),{},{otherChoice:b}))))))}break;case $e:P(Object(da.a)(Object(da.a)({},_),{},Object(aa.a)({},t,Object(da.a)(Object(da.a)({},_[t]),{},Object(aa.a)({},e.target.name,Object(da.a)(Object(da.a)({},null===(j=_[t])||void 0===j?void 0:j[e.target.name]),{},{priority:e.target.value}))))))}};Object(a.useEffect)((function(){0===r.length&&n(1)}),[]),Object(a.useEffect)((function(){c(1)}),[]),Object(a.useEffect)((function(){if(g){P(g);var e=s.reduce((function(e,t,n){return Object(da.a)(Object(da.a)({},e),{},Object(aa.a)({},n,!0))}),{});M(e),R(s.length)}}),[g,s]);var z,Y=function(e){var t,n,a,r,c,s,i=e.question;return Object(ze.jsxs)(ze.Fragment,{children:[Object(ze.jsx)(m.a,{variant:"h6",color:"textPrimary",gutterBottom:!0,children:i.question_text}),Object(ze.jsxs)(f.a,{container:!0,spacing:8,children:[Object(ze.jsx)(f.a,{item:!0,xs:4,children:Object(ze.jsxs)(_r.a,{children:[Object(ze.jsx)(Pr.a,{children:"You are..."}),Object(ze.jsx)(Er.a,{name:i.id,value:null===(t=_[k])||void 0===t||null===(n=t[i.id])||void 0===n?void 0:n.myChoice,onChange:function(e){return Q(e,k,Xe,et)},children:i.choice_set.map((function(e){return Object(ze.jsx)(Tr.a,{control:Object(ze.jsx)(kr.a,{color:"primary"}),value:e,label:e},e)}))})]})}),Object(ze.jsx)(f.a,{item:!0,xs:4,children:Object(ze.jsxs)(_r.a,{children:[Object(ze.jsx)(Pr.a,{children:"Your ideal roommate is......"}),Object(ze.jsx)(Er.a,{name:i.id,value:null===(a=_[k])||void 0===a||null===(r=a[i.id])||void 0===r?void 0:r.otherChoice,onChange:function(e){return Q(e,k,Xe,tt)},children:i.choice_set.map((function(e){return Object(ze.jsx)(Tr.a,{control:Object(ze.jsx)(kr.a,{color:"primary"}),value:e,label:e},e)}))})]})}),Object(ze.jsx)(f.a,{item:!0,xs:4,children:Object(ze.jsxs)(_r.a,{children:[Object(ze.jsx)(Pr.a,{children:"This question is..."}),Object(ze.jsx)(Er.a,{name:i.id,value:null===(c=_[k])||void 0===c||null===(s=c[i.id])||void 0===s?void 0:s.priority,onChange:function(e){return Q(e,k,$e)},children:S.map((function(e){return Object(ze.jsx)(Tr.a,{control:Object(ze.jsx)(kr.a,{color:"primary"}),value:e,label:e},e)}))})]})})]})]})},V=function(e){var t,n,a=e.question;return Object(ze.jsxs)(ze.Fragment,{children:[Object(ze.jsx)(m.a,{variant:"h6",color:"textPrimary",gutterBottom:!0,children:a.question_text}),Object(ze.jsxs)(f.a,{container:!0,item:!0,spacing:8,children:[Object(ze.jsx)(f.a,{item:!0,xs:4,children:Object(ze.jsxs)(_r.a,{children:[Object(ze.jsx)(Pr.a,{children:"You are..."}),Object(ze.jsx)(Lr.a,{children:a.choice_set.map((function(e){var t,n,r;return Object(ze.jsx)(Tr.a,{control:Object(ze.jsx)(Ar.a,{color:"primary"}),name:a.id,value:e,label:e,checked:null===(t=_[k])||void 0===t||null===(n=t[a.id])||void 0===n||null===(r=n.myChoice)||void 0===r?void 0:r.includes(e),onChange:function(e){return Q(e,k,Ze,et)}},e)}))})]})}),Object(ze.jsx)(f.a,{item:!0,xs:4,children:Object(ze.jsxs)(_r.a,{children:[Object(ze.jsx)(Pr.a,{children:"Your ideal roommate is......"}),Object(ze.jsx)(Lr.a,{children:a.choice_set.map((function(e){var t,n,r;return Object(ze.jsx)(Tr.a,{name:a.id,value:e,control:Object(ze.jsx)(Ar.a,{color:"primary"}),checked:null===(t=_[k])||void 0===t||null===(n=t[a.id])||void 0===n||null===(r=n.otherChoice)||void 0===r?void 0:r.includes(e),label:e,onChange:function(e){return Q(e,k,Ze,tt)}},e)}))})]})}),Object(ze.jsx)(f.a,{item:!0,xs:4,children:Object(ze.jsxs)(_r.a,{children:[Object(ze.jsx)(Pr.a,{children:"This question is..."}),Object(ze.jsx)(Er.a,{name:a.id,value:null===(t=_[k])||void 0===t||null===(n=t[a.id])||void 0===n?void 0:n.priority,onChange:function(e){return Q(e,k,$e)},children:S.map((function(e){return Object(ze.jsx)(Tr.a,{control:Object(ze.jsx)(kr.a,{color:"primary"}),value:e,label:e},e)}))})]})})]})]})},K=Object(ze.jsx)(Ir.a,{nonLinear:!0,alternativeLabel:!0,activeStep:k,children:s.map((function(e,t){return Object(ze.jsx)(Nr.a,{children:Object(ze.jsx)(Rr.a,{onClick:J(t),completed:D[t],className:t===k?v.active:null,children:e})},e)}))}),X=Object(ze.jsxs)(f.a,{container:!0,children:[Object(ze.jsx)(f.a,{container:!0,item:!0,xs:12,style:{padding:48},children:s.filter((function(e){return"Confirmation"!==e})).map((function(e,t){return Object(ze.jsxs)(f.a,{item:!0,xs:12,style:{marginBottom:32},children:[Object(ze.jsxs)(f.a,{container:!0,children:[Object(ze.jsx)(f.a,{item:!0,xs:3,children:Object(ze.jsx)(m.a,{variant:"h6",children:e})}),Object(ze.jsx)(f.a,{item:!0,xs:3,children:Object(ze.jsx)(m.a,{variant:"body1",color:"textSecondary",children:"You are..."})}),Object(ze.jsx)(f.a,{item:!0,xs:3,children:Object(ze.jsx)(m.a,{variant:"body1",color:"textSecondary",children:"Your ideal roommate is......"})}),Object(ze.jsx)(f.a,{item:!0,xs:3,children:Object(ze.jsx)(m.a,{variant:"body1",color:"textSecondary",children:"This question is..."})})]}),Object(ze.jsx)(f.a,{container:!0,children:r.filter((function(t){return t.category===e})).map((function(e){var n,a,r,c,s,i,o,l,u,d,j,h;return Object(ze.jsxs)(f.a,{container:!0,item:!0,xs:12,spacing:8,children:[Object(ze.jsx)(f.a,{item:!0,xs:3,children:Object(ze.jsx)(m.a,{variant:"body1",gutterBottom:!0,children:e.question_text})}),Object(ze.jsx)(f.a,{item:!0,xs:3,children:e.question_type===Ze?Object(ze.jsx)(m.a,{variant:"body1",gutterBottom:!0,children:null===(n=_[t])||void 0===n||null===(a=n[e.id])||void 0===a||null===(r=a.myChoice)||void 0===r?void 0:r.reduce((function(e,t){return(e?e+", ":e)+t}),"")}):Object(ze.jsx)(m.a,{variant:"body1",gutterBottom:!0,children:null===(c=_[t])||void 0===c||null===(s=c[e.id])||void 0===s?void 0:s.myChoice})}),Object(ze.jsx)(f.a,{item:!0,xs:3,children:e.question_type===Ze?Object(ze.jsx)(m.a,{variant:"body1",gutterBottom:!0,children:null===(i=_[t])||void 0===i||null===(o=i[e.id])||void 0===o||null===(l=o.otherChoice)||void 0===l?void 0:l.reduce((function(e,t){return(e?e+", ":e)+t}),"")}):Object(ze.jsx)(m.a,{variant:"body1",gutterBottom:!0,children:null===(u=_[t])||void 0===u||null===(d=u[e.id])||void 0===d?void 0:d.otherChoice})}),Object(ze.jsx)(f.a,{item:!0,xs:3,children:Object(ze.jsx)(m.a,{variant:"body1",gutterBottom:!0,children:null===(j=_[t])||void 0===j||null===(h=j[e.id])||void 0===h?void 0:h.priority})})]})}))})]},e)}))}),Object(ze.jsxs)(f.a,{item:!0,xs:12,style:{display:"flex",justifyContent:"center"},children:[Object(ze.jsx)(O.a,{onClick:G,style:{marginRight:8},children:"Back"}),Object(ze.jsx)(O.a,{variant:"contained",color:"primary",onClick:function(){B(!0)},children:"Submit"})]})]}),Z=Object(ze.jsxs)(f.a,{container:!0,children:[Object(ze.jsx)(f.a,{container:!0,item:!0,xs:12,style:{padding:48},children:r.filter((function(e){return e.category===s[k]})).map((function(e){return Object(ze.jsx)(f.a,{item:!0,xs:12,style:{marginBottom:32},children:e.question_type===Xe?Object(ze.jsx)(Y,{question:e}):Object(ze.jsx)(V,{question:e})})}))}),Object(ze.jsxs)(f.a,{item:!0,xs:12,style:{display:"flex",justifyContent:"center"},children:[Object(ze.jsx)(O.a,{onClick:G,disabled:0===k,style:{marginRight:8},children:"Back"}),Object(ze.jsx)(O.a,{variant:"contained",color:"primary",onClick:function(){window.scrollTo(0,0),L((function(e){return e+1})),R((function(e){return k>=N?e+1:e}));var e=D;e[k]=!0,M(e)},disabled:(z=k,!r.filter((function(e){return e.category===s[z]})).reduce((function(e,t){var n,a,r,c,s,i,o,l,u,d,j,h,b,p;return e&&(Array.isArray(null===(n=_[z])||void 0===n||null===(a=n[t.id])||void 0===a?void 0:a.myChoice)?(null===(r=_[z])||void 0===r||null===(c=r[t.id])||void 0===c?void 0:c.myChoice.length)>0:null===(s=_[z])||void 0===s||null===(i=s[t.id])||void 0===i?void 0:i.myChoice)&&(Array.isArray(null===(o=_[z])||void 0===o||null===(l=o[t.id])||void 0===l?void 0:l.otherChoice)?(null===(u=_[z])||void 0===u||null===(d=u[t.id])||void 0===d?void 0:d.otherChoice.length)>0:null===(j=_[z])||void 0===j||null===(h=j[t.id])||void 0===h?void 0:h.otherChoice)&&(null===(b=_[z])||void 0===b||null===(p=b[t.id])||void 0===p?void 0:p.priority)}),!0)),children:"Next"})]})]}),$=Object(ze.jsx)(ea,{open:H,confirmationText:"Are you sure you want to submit?",thankYouText:"Thank you for your submission!",success:x?h:l,handleCancel:function(){return B(!1)},handleSubmit:function(){var e=Object.values(_).map((function(e){return Object.values(e)})),n={first_name:t.first_name,last_name:t.last_name};x?d(x,1,e,n):o(1,e,n)},handleClose:function(){u(),p(),B(!1),y.push("/matchmaking")}});return Object(ze.jsx)(ze.Fragment,{children:0!==r.length&&0!==s.length?Object(ze.jsxs)(sn.a,{className:v.paper,children:[K,Object(ze.jsx)("div",{children:k===s.length-1?X:Z}),$]}):null})})),Dr=n(446),Mr=function(e){var t,n,a=e.question,r=e.formFields,c=e.handleChange,s=e.currentCategory;return Object(ze.jsxs)(ze.Fragment,{children:[Object(ze.jsx)(m.a,{variant:"h6",color:"textPrimary",children:a.question_text}),Object(ze.jsx)(_a.a,{variant:"outlined",fullWidth:!0,name:a.id,value:null===(t=r[s])||void 0===t||null===(n=t[a.id])||void 0===n?void 0:n.choice,onChange:function(e){return c(e,s,Xe)}})]})},Wr=function(e){var t,n,r,c=e.question,s=e.formFields,i=e.handleCapture,o=e.currentCategory,l=Object(a.useRef)();return Object(ze.jsxs)(ze.Fragment,{children:[Object(ze.jsx)(m.a,{variant:"h6",color:"textPrimary",children:c.question_text}),Object(ze.jsx)("input",{type:"file",id:"image",accept:"image/png, image/jpeg",multiple:!0,onChange:function(e){return i(e,o)},name:c.id,ref:l,style:{display:"none"}}),Object(ze.jsx)(O.a,{variant:"contained",color:"primary",onClick:function(){l.current.click()},children:"Upload"}),Object(ze.jsx)(m.a,{variant:"body1",display:"inline",style:{marginLeft:10},children:(null===(t=s[o])||void 0===t||null===(n=t[c.id])||void 0===n||null===(r=n.choice)||void 0===r?void 0:r.join(", "))||"No photo(s) uploaded."})]})},qr={getQuestions:xr,createPost:Nt,editPost:Rt,resetCreatePostSuccess:Xt,resetEditPostSuccess:Zt,getUserPosts:It,getPostList:Lt},Hr=Object(o.b)((function(e){return{isAuthenticated:e.auth.isAuthenticated,user:e.auth.user,roommateQuestions:e.form.roommateQuestions,roommateCategories:e.form.roommateCategories,housingQuestions:e.form.housingQuestions,housingCategories:e.form.housingCategories,profileQuestions:e.form.profileQuestions,profileCategories:e.form.profileCategories,createPostSuccess:e.post.createPostSuccess,editPostSuccess:e.post.editPostSuccess,userPost:e.post.userPost}}),qr)((function(e){var t=e.user,n=e.getQuestions,r=e.housingQuestions,c=e.getPostList,s=e.housingCategories,o=e.createPost,l=e.createPostSuccess,u=e.resetCreatePostSuccess,d=e.editPost,h=e.editPostSuccess,p=e.resetEditPostSuccess,g=e.initialFormFields,x=e.id,v=Object(b.a)((function(e){return{paper:{padding:30,paddingBottom:50,marginLeft:23,marginRight:23},flex:{display:"flex",flexDirection:"column",alignItems:"center"},category:{marginBottom:10},active:{background:e.palette.action.hover}}}))(),y=Object(j.g)(),S=Object(a.useState)({}),w=Object(i.a)(S,2),C=w[0],_=w[1],P=Object(a.useState)(0),E=Object(i.a)(P,2),T=E[0],k=E[1],L=Object(a.useState)(0),A=Object(i.a)(L,2),I=A[0],N=A[1],R=Object(a.useState)({}),F=Object(i.a)(R,2),U=F[0],D=F[1],M=Object(a.useState)(!1),W=Object(i.a)(M,2),q=W[0],H=W[1],B=Object(a.useState)(void 0),G=Object(i.a)(B,2),J=G[0],Q=G[1],z=function(){window.scrollTo(0,0),k((function(e){return e-1}))},Y=function(e){return function(){return e<=I?k(e):null}},V=function(e,t,n){var a,r,c,s;switch(n){case Xe:_(Object(da.a)(Object(da.a)({},C),{},Object(aa.a)({},t,Object(da.a)(Object(da.a)({},C[t]),{},Object(aa.a)({},e.target.name,Object(da.a)(Object(da.a)({},null===(a=C[t])||void 0===a?void 0:a[e.target.name]),{},{question:e.target.name,choice:e.target.value}))))));break;case Ze:var i=(null===(r=C[t])||void 0===r||null===(c=r[e.target.name])||void 0===c?void 0:c.choice)||[];(null===i||void 0===i?void 0:i.includes(e.target.value))?i.splice(i.indexOf(e.target.value),1):i.push(e.target.value),_(Object(da.a)(Object(da.a)({},C),{},Object(aa.a)({},t,Object(da.a)(Object(da.a)({},C[t]),{},Object(aa.a)({},e.target.name,Object(da.a)(Object(da.a)({},null===(s=C[t])||void 0===s?void 0:s[e.target.name]),{},{question:e.target.name,choice:i}))))))}},K=function(e,t){var n;Q(e.target.files),_(Object(da.a)(Object(da.a)({},C),{},Object(aa.a)({},t,Object(da.a)(Object(da.a)({},C[t]),{},Object(aa.a)({},e.target.name,Object(da.a)(Object(da.a)({},null===(n=C[t])||void 0===n?void 0:n[e.target.name]),{},{question:e.target.name,choice:Array.from(e.target.files).map((function(e){return e.name}))}))))))};Object(a.useEffect)((function(){0===r.length&&n(2)}),[]),Object(a.useEffect)((function(){0===s.length&&c(2)}),[]),Object(a.useEffect)((function(){if(g){_(g);var e=s.reduce((function(e,t,n){return Object(da.a)(Object(da.a)({},e),{},Object(aa.a)({},n,!0))}),{});D(e),N(s.length)}}),[g,s]);var X,Z=function(e){var t,n,a=e.question;return Object(ze.jsxs)(ze.Fragment,{children:[Object(ze.jsx)(m.a,{variant:"h6",color:"textPrimary",gutterBottom:!0,children:a.question_text}),Object(ze.jsx)(_r.a,{children:Object(ze.jsx)(Er.a,{name:a.id,value:null===(t=C[T])||void 0===t||null===(n=t[a.id])||void 0===n?void 0:n.choice,onChange:function(e){return V(e,T,Xe)},children:a.choice_set.map((function(e){return Object(ze.jsx)(Tr.a,{control:Object(ze.jsx)(kr.a,{color:"primary"}),value:e,label:e},e)}))})})]})},$=function(e){var t=e.question;return Object(ze.jsxs)(ze.Fragment,{children:[Object(ze.jsx)(m.a,{variant:"h6",color:"textPrimary",gutterBottom:!0,children:t.question_text}),Object(ze.jsx)(_r.a,{children:Object(ze.jsx)(Lr.a,{children:t.choice_set.map((function(e){var n,a,r;return Object(ze.jsx)(Tr.a,{control:Object(ze.jsx)(Ar.a,{color:"primary"}),name:t.id,value:e,label:e,checked:null===(n=C[T])||void 0===n||null===(a=n[t.id])||void 0===a||null===(r=a.choice)||void 0===r?void 0:r.includes(e),onChange:function(e){return V(e,T,Ze)}},e)}))})})]})},ee=function(e){var t,n,a=e.question;return Object(ze.jsxs)(ze.Fragment,{children:[Object(ze.jsx)(m.a,{variant:"h6",color:"textPrimary",children:a.question_text}),Object(ze.jsx)(Dr.a,{variant:"outlined",fullWidth:!0,name:a.id,value:null===(t=C[T])||void 0===t||null===(n=t[a.id])||void 0===n?void 0:n.choice,onChange:function(e){return V(e,T,Xe)},children:a.choice_set.map((function(e){return Object(ze.jsx)(ma.a,{value:e,children:e},e)}))})]})},te=Object(ze.jsx)(Ir.a,{nonLinear:!0,alternativeLabel:!0,activeStep:T,children:s.map((function(e,t){return Object(ze.jsx)(Nr.a,{children:Object(ze.jsx)(Rr.a,{onClick:Y(t),completed:U[t],className:t===T?v.active:null,children:e})},e)}))}),ne=Object(ze.jsxs)(f.a,{container:!0,children:[Object(ze.jsx)(f.a,{container:!0,item:!0,xs:12,style:{padding:48},children:s.filter((function(e){return"Confirmation"!==e})).map((function(e,t){return Object(ze.jsxs)(f.a,{container:!0,item:!0,xs:12,style:{marginBottom:32},children:[Object(ze.jsxs)(f.a,{container:!0,item:!0,xs:12,children:[Object(ze.jsx)(f.a,{item:!0,xs:1}),Object(ze.jsx)(f.a,{item:!0,xs:11,children:Object(ze.jsx)(m.a,{variant:"h6",children:e})})]}),Object(ze.jsx)(f.a,{container:!0,item:!0,xs:12,children:r.filter((function(t){return t.category===e})).map((function(e){var n,a,r,c,s;return Object(ze.jsxs)(f.a,{container:!0,item:!0,xs:12,children:[Object(ze.jsx)(f.a,{item:!0,xs:1}),Object(ze.jsx)(f.a,{item:!0,xs:5,children:Object(ze.jsx)(m.a,{variant:"body1",gutterBottom:!0,children:e.question_text})}),Object(ze.jsx)(f.a,{item:!0,xs:1}),Object(ze.jsx)(f.a,{item:!0,xs:5,children:e.question_type===Ze||"File"===e.question_type?Object(ze.jsx)(m.a,{variant:"body1",gutterBottom:!0,children:null===(n=C[t])||void 0===n||null===(a=n[e.id])||void 0===a||null===(r=a.choice)||void 0===r?void 0:r.join(", ")}):Object(ze.jsx)(m.a,{variant:"body1",gutterBottom:!0,children:null===(c=C[t])||void 0===c||null===(s=c[e.id])||void 0===s?void 0:s.choice})})]})}))})]},e)}))}),Object(ze.jsxs)(f.a,{item:!0,xs:12,style:{display:"flex",justifyContent:"center"},children:[Object(ze.jsx)(O.a,{onClick:z,style:{marginRight:8},children:"Back"}),Object(ze.jsx)(O.a,{variant:"contained",color:"primary",onClick:function(){H(!0)},children:"Submit"})]})]}),ae=Object(ze.jsxs)(f.a,{container:!0,children:[Object(ze.jsx)(f.a,{container:!0,item:!0,xs:12,style:{padding:48},children:r.filter((function(e){return e.category===s[T]})).map((function(e){return Object(ze.jsx)(f.a,{item:!0,xs:12,style:{marginBottom:32},children:e.question_type===Xe?Object(ze.jsx)(Z,{question:e}):e.question_type===Ze?Object(ze.jsx)($,{question:e}):"Text"===e.question_type?Object(ze.jsx)(Mr,{question:e,formFields:C,handleChange:V,currentCategory:T}):"Select"===e.question_type?Object(ze.jsx)(ee,{question:e}):Object(ze.jsx)(Wr,{question:e,formFields:C,handleCapture:K,currentCategory:T})},e.id)}))}),Object(ze.jsxs)(f.a,{item:!0,xs:12,style:{display:"flex",justifyContent:"center"},children:[Object(ze.jsx)(O.a,{onClick:z,disabled:0===T,style:{marginRight:8},children:"Back"}),Object(ze.jsx)(O.a,{variant:"contained",color:"primary",onClick:function(){window.scrollTo(0,0),k((function(e){return e+1})),N((function(e){return T>=I?e+1:e}));var e=U;e[T]=!0,D(e)},disabled:(X=T,!r.filter((function(e){return e.category===s[X]})).reduce((function(e,t){var n,a,r,c,s,i;return e&&(Array.isArray(null===(n=C[X])||void 0===n||null===(a=n[t.id])||void 0===a?void 0:a.choice)?(null===(r=C[X])||void 0===r||null===(c=r[t.id])||void 0===c?void 0:c.choice.length)>0:null===(s=C[X])||void 0===s||null===(i=s[t.id])||void 0===i?void 0:i.choice)}),!0)),children:"Next"})]})]}),re=Object(ze.jsx)(ea,{open:q,confirmationText:"Are you sure you want to submit?",thankYouText:"Thank you for your submission!",success:x?h:l,handleCancel:function(){return H(!1)},handleSubmit:function(){var e=Object.values(C).map((function(e){return Object.values(e)})),n={first_name:t.first_name,last_name:t.last_name};x?d(x,2,e,n,void 0,void 0,J):o(2,e,n,J)},handleClose:function(){u(),p(),H(!1),y.push("/housings")}});return Object(ze.jsx)(ze.Fragment,{children:0!==r.length&&0!==s.length?Object(ze.jsxs)(sn.a,{className:v.paper,children:[te,Object(ze.jsx)("div",{children:T===s.length-1?ne:ae}),re]}):null})})),Br={getPostList:Lt,getUserPosts:It,searchPost:Ut,setPage:rn,setFilter:cn},Gr=Object(o.b)((function(e){return{user:e.auth.user,userRoommatePosts:e.post.userRoommatePosts,posts:e.post.posts,postLoading:e.post.postLoading,searchedPost:e.post.searchedPost,count:e.post.count,userRoommatePostsCount:e.post.userRoommatePostsCount,searchedPostCount:e.post.searchedPostCount,searchItem:e.post.searchItem,page:e.post.page,filter:e.post.filter}}),Br)((function(e){var t=e.user,n=e.postLoading,r=e.userRoommatePosts,c=e.userRoommatePostsCount,s=e.getUserPosts,o=e.posts,l=e.count,u=e.getPostList,d=e.searchedPost,h=e.searchedPostCount,g=e.searchItem,x=e.searchPost,v=e.page,y=e.setPage,S=e.filter,w=e.setFilter,C=Object(b.a)((function(e){return{tooltip:{position:"fixed",bottom:e.spacing(2),right:e.spacing(3)},grid:{display:"flex",flexDirection:"column"}}}))(),_=Object(j.g)(),P=Object(a.useRef)(null),E=Object(a.useState)(!1),T=Object(i.a)(E,2),k=T[0],L=T[1],A=function(){L(!1)},I=function(){w(nt),y(1),L(!1),s(t.id,1)},N=function(){w(at),y(1),L(!1),u(1)};Object(a.useEffect)((function(){u(1,v)}),[]),Object(a.useEffect)((function(){S===nt&&t&&s(t.id,1,v)}),[t]);var R=d||(S===nt?r:o),F=d?h:S===nt?c:l;return Object(ze.jsxs)("div",{children:[t&&Object(ze.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:20,marginLeft:30,marginRight:30},children:[Object(ze.jsx)(m.a,{variant:"h6",children:"Roommate Dashboard"}),Object(ze.jsx)(O.a,{ref:P,onClick:function(){L(!0)},startIcon:Object(ze.jsx)(Sa.a,{}),style:{textDecoration:"none"},children:S}),Object(ze.jsx)(ja.a,{open:k,anchorEl:P.current,role:void 0,transition:!0,disablePortal:!0,placement:"bottom-end",children:function(e){var t=e.TransitionProps,n=e.placement;return Object(ze.jsx)(ha.a,Object(da.a)(Object(da.a)({},t),{},{style:{transformOrigin:"bottom"===n?"center bottom":"center top"},children:Object(ze.jsx)(sn.a,{children:Object(ze.jsx)(ba.a,{onClickAway:A,children:Object(ze.jsxs)(pa.a,{children:[Object(ze.jsx)(ma.a,{onClick:I,children:"My post(s)"}),Object(ze.jsx)(ma.a,{onClick:N,children:"All posts"})]})})})}))}})]}),0!==R.length?Object(ze.jsx)(p.a,{children:Object(ze.jsx)(f.a,{container:!0,spacing:2,children:R.map((function(e){return Object(ze.jsx)(f.a,{item:!0,xs:12,md:6,lg:4,className:C.grid,children:Object(ze.jsx)(na,{post:e,page:v})},e.id)}))})}):Object(ze.jsx)(ze.Fragment,{children:!n&&Object(ze.jsx)("div",{style:{textAlign:"center"},children:Object(ze.jsx)(m.a,{variant:"subtitle1",children:"No post."})})}),0!==R.length?Object(ze.jsx)(Oa.a,{style:{width:"100%",display:"flex",justifyContent:"center",marginTop:60},children:Object(ze.jsx)(ga.a,{color:"primary",count:Math.ceil(F/2),page:v,onChange:function(e,n){y(n),d?x(1,g,n):S===nt?s(t.id,1,n):u(1,n),window.scroll(0,0)}})}):null,t&&0===(null===r||void 0===r?void 0:r.length)&&Object(ze.jsx)(Bn.a,{title:"",onClick:function(){_.push("/roommate-form")},children:Object(ze.jsx)(fa.a,{color:"primary",className:C.tooltip,children:Object(ze.jsx)(va.a,{})})})]})})),Jr=n(437),Qr=n(373),zr=n(374),Yr=n(438),Vr=n(439),Kr={setPage:rn},Xr=Object(o.b)((function(e){return{user:e.auth.user}}),Kr)((function(e){var t,n,a=e.user,r=e.drawerWidth,c=e.menuOpen,s=e.hoverOpen,i=e.drawerOpen,o=e.handleMouseEnter,l=e.handleMouseLeave,u=e.setPage,d=Object(b.a)((function(e){return{active:{background:e.palette.action.hover},drawer:{width:r,flexShrink:0,whiteSpace:"nowrap",position:"absolute"},drawerOpen:{width:r,transition:e.transitions.create("width",{easing:e.transitions.easing.sharp,duration:e.transitions.duration.enteringScreen})},drawerOpenDelay:{width:r,transition:e.transitions.create("width",{easing:e.transitions.easing.sharp,duration:e.transitions.duration.enteringScreen}),transitionDelay:"1s"},drawerClose:Object(aa.a)({transition:e.transitions.create("width",{easing:e.transitions.easing.sharp,duration:e.transitions.duration.leavingScreen}),overflowX:"hidden",width:e.spacing(7)+1},e.breakpoints.up("sm"),{width:e.spacing(7)+1}),toolbar:{display:"flex",alignItems:"center",justifyContent:"flex-end",padding:e.spacing(0,1),minHeight:e.mixins.toolbar.minHeight+8},hidden:{display:"none"}}})),h=[{text:"Housings",icon:Object(ze.jsx)(qa.a,{color:"primary"}),path:"/housings",private:!1},{text:"Roommates",icon:Object(ze.jsx)(Ba.a,{color:"primary"}),path:"/roommates",private:!1},{text:"Chat",icon:Object(ze.jsx)(Ua.a,{color:"primary"}),path:"/chat",private:!0}],p=Object(j.g)(),m=Object(j.h)(),O=d();return Object(ze.jsxs)(Jr.a,{variant:"permanent",onMouseEnter:o,onMouseLeave:l,className:Object(ra.a)(O.drawer,(t={},Object(aa.a)(t,O.drawerOpen,i),Object(aa.a)(t,O.drawerOpenDelay,!c&&s),Object(aa.a)(t,O.drawerClose,!i),t)),classes:{paper:Object(ra.a)((n={},Object(aa.a)(n,O.drawerOpen,i),Object(aa.a)(n,O.drawerOpenDelay,!c&&s),Object(aa.a)(n,O.drawerClose,!i),n))},children:[Object(ze.jsx)("div",{className:O.toolbar}),Object(ze.jsx)(Qr.a,{children:h.map((function(e){var t;return Object(ze.jsxs)(zr.a,{button:!0,onClick:function(){p.push(e.path),u(1)},className:Object(ra.a)((t={},Object(aa.a)(t,O.active,m.pathname===e.path),Object(aa.a)(t,O.hidden,e.private&&!a),t)),children:[Object(ze.jsx)(Yr.a,{children:e.icon}),Object(ze.jsx)(Vr.a,{primary:e.text})]},e.text)}))})]})})),Zr=n(17),$r=n(441),ec=n(442),tc=n(203),nc=n.n(tc),ac=n(91),rc=n.n(ac),cc=n.p+"static/media/housemates-logo-without-text-white.46ea2238.svg",sc=n(202),ic=n.n(sc),oc=n(201),lc=n.n(oc),uc=n(158),dc=n.n(uc),jc={logout:function(){return function(e){return e({type:D})}},searchPost:Ut,cancelSearch:function(){return function(){var e=Object(v.a)(x.a.mark((function e(t){return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:try{t(nn())}catch(n){t(an(" Unable to cancel search"))}case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},getPostList:Lt,setPage:rn},hc=Object(o.b)((function(e){return{isAuthenticated:e.auth.isAuthenticated,user:e.auth.user}}),jc)((function(e){var t=e.handleMenuButton,n=e.user,r=e.isAuthenticated,c=e.logout,s=e.getPostList,o=e.searchPost,l=e.cancelSearch,u=e.setPage,d=e.setTheme,p=e.theme,f=Object(b.a)((function(e){return{appBar:{zIndex:e.zIndex.drawer+1},toolbar:{display:"flex",paddingLeft:24,minHeight:e.mixins.toolbar.minHeight+8},menuButton:{marginRight:25,marginLeft:-20},logo:{marginRight:10},title:{marginRight:30},grow:{flexGrow:1},search:{position:"relative",borderRadius:e.shape.borderRadius,backgroundColor:Object(Zr.c)(e.palette.common.white,.15),"&:hover":{backgroundColor:Object(Zr.c)(e.palette.common.white,.25)},marginRight:e.spacing(2),marginLeft:0,width:400,height:40},searchIcon:{padding:e.spacing(0,2),height:"100%",position:"absolute",pointerEvents:"none",display:"flex",alignItems:"center",justifyContent:"center"},inputRoot:{color:"inherit"},inputInput:{padding:e.spacing(1,1,1,0),paddingLeft:"calc(1em + ".concat(e.spacing(4),"px)"),transition:e.transitions.create("width"),width:"100%"},buttons:{textDecoration:"none",color:"white"},profilePic:{marginLeft:10,cursor:"pointer"},white:{color:"white"},pointer:{cursor:"pointer"}}})),g=p?Object(ze.jsx)(ic.a,{}):Object(ze.jsx)(lc.a,{}),x=Object(j.h)(),v=f(),y=Object(j.g)(),S=Object(a.useRef)(null),w=Object(a.useState)(!1),C=Object(i.a)(w,2),_=C[0],P=C[1],E=Object(a.useState)({search:""}),T=Object(i.a)(E,2),k=T[0],L=T[1],A=function(){P(!1)},I=function(){P(!1),y.push("/profile")},N=function(){P(!1),c(),y.push("/login")},R=function(){n&&y.push("/profile")};return Object(ze.jsx)("div",{children:Object(ze.jsx)($r.a,{position:"fixed",className:v.appBar,children:Object(ze.jsxs)(ec.a,{className:v.toolbar,children:[Object(ze.jsx)(Gn.a,{color:"inherit","aria-label":"open drawer",onClick:t,edge:"start",className:v.menuButton,children:Object(ze.jsx)(nc.a,{})}),Object(ze.jsx)("img",{alt:"logo",src:cc,width:"45",height:"45",className:Object(ra.a)(v.logo,Object(aa.a)({},v.pointer,n)),onClick:R}),Object(ze.jsx)(m.a,{variant:"h6",className:Object(ra.a)(v.title,Object(aa.a)({},v.pointer,n)),onClick:R,children:"HouseMates"}),Object(ze.jsx)("div",{className:v.grow}),"/roommates"===x.pathname&&Object(ze.jsx)(dc.a,{className:v.search,value:k.search,onChange:function(e){return L({search:e})},onRequestSearch:function(){return e=k.search,u(1),void o(1,e);var e},onCancelSearch:function(){l(),L({search:""}),s(1),u(1)},cancelOnEscape:!0,searchIcon:Object(ze.jsx)(rc.a,{style:{color:"white"}}),closeIcon:Object(ze.jsx)(rc.a,{style:{color:"white"}}),placeholder:"Search...",classes:{input:v.white}}),Object(ze.jsx)("div",{className:v.grow}),r&&n?Object(ze.jsxs)(a.Fragment,{style:{display:"flex",flexDirection:"row"},children:[Object(ze.jsx)("div",{style:{alignSelf:"center"},children:Object(ze.jsxs)(m.a,{noWrap:!0,children:["Welcome ",n.first_name," ",n.last_name,"!"]})}),Object(ze.jsxs)("div",{children:[Object(ze.jsx)(Ia.a,{className:v.profilePic,onClick:function(){P(!0)},src:n.profile_pic,ref:S}),Object(ze.jsx)(ja.a,{open:_,anchorEl:S.current,role:void 0,transition:!0,disablePortal:!0,placement:"bottom-end",children:function(e){var t=e.TransitionProps,n=e.placement;return Object(ze.jsx)(ha.a,Object(da.a)(Object(da.a)({},t),{},{style:{transformOrigin:"bottom"===n?"center bottom":"center top"},children:Object(ze.jsx)(sn.a,{children:Object(ze.jsx)(ba.a,{onClickAway:A,children:Object(ze.jsxs)(pa.a,{children:[Object(ze.jsx)(ma.a,{children:Object(ze.jsx)(Gn.a,{edge:"end",color:"inherit","aria-label":"mode",onClick:function(){return d(!p)},children:g})}),Object(ze.jsx)(ma.a,{onClick:I,children:"Profile"}),Object(ze.jsx)(ma.a,{onClick:N,children:"Logout"})]})})})}))}})]})]}):Object(ze.jsxs)(ze.Fragment,{children:[Object(ze.jsx)(O.a,{children:Object(ze.jsx)(h.b,{to:"/login",className:v.buttons,children:"Login"})}),Object(ze.jsx)(O.a,{children:Object(ze.jsx)(h.b,{to:"/register",className:v.buttons,children:"Register"})})]})]})})})})),bc=Object(o.b)((function(e){return{formLoading:e.form.formLoading,postLoading:e.post.postLoading,profileLoading:e.auth.profileLoading}}))((function(e){var t=e.children,n=e.formLoading,r=e.postLoading,c=e.profileLoading,s=e.setTheme,o=e.theme,l=Object(b.a)((function(e){return{root:{display:"flex"},content:{flexGrow:1,padding:e.spacing(3)},toolbar:{display:"flex",alignItems:"center",justifyContent:"flex-end",padding:e.spacing(0,1),minHeight:e.mixins.toolbar.minHeight+8},closeSize:{minHeight:100,width:e.spacing(8)+1,transition:e.transitions.create("width",{easing:e.transitions.easing.sharp,duration:e.transitions.duration.enteringScreen})},openSize:{minHeight:100,width:u+60,transition:e.transitions.create("width",{easing:e.transitions.easing.sharp,duration:e.transitions.duration.enteringScreen})}}})),u=190,d=l(),h=Object(j.h)(),p=Object(a.useState)(!1),m=Object(i.a)(p,2),O=m[0],f=m[1],g=Object(a.useState)(!1),x=Object(i.a)(g,2),v=x[0],y=x[1],S=O||!O&&v;return Object(ze.jsxs)(sn.a,{className:d.root,elevation:0,children:[Object(ze.jsx)(hc,{handleMenuButton:function(){f(!O)},setTheme:s,theme:o}),Object(ze.jsx)(Xr,{drawerWidth:u,menuOpen:O,hoverOpen:v,drawerOpen:S,handleMouseEnter:function(){y(!0)},handleMouseLeave:function(){y(!1)}}),Object(ze.jsxs)("main",{className:d.content,children:[Object(ze.jsx)("div",{className:d.toolbar}),Object(ze.jsxs)("div",{style:{display:"flex"},children:[Object(ze.jsx)("div",{className:O?d.openSize:d.closeSize}),Object(ze.jsxs)("div",{style:{width:"100%",display:"flex",flexDirection:"column",alignItems:"center"},children:[(r||n||c)&&Object(ze.jsx)($n.a,{style:{marginBottom:40}}),Object(ze.jsx)("div",{style:{width:"100%"},children:t}),"/chat"!==h.pathname&&Object(ze.jsx)("div",{style:{marginTop:60},children:Object(ze.jsx)(Un,{})})]})]})]})]})})),pc=n.p+"static/media/housemates-logo-with-text-black.34fb629a.svg",mc=Object(o.b)((function(e){return{authLoading:e.auth.authLoading}}))((function(e){var t=e.children,n=e.title,a=e.authLoading;return Object(ze.jsxs)("div",{style:{display:"flex",flexDirection:"column",alignItems:"center"},children:[Object(ze.jsx)("img",{alt:"logo",src:pc,width:"150",height:"150",style:{marginTop:50}}),Object(ze.jsx)(m.a,{variant:"h6",gutterBottom:!0,children:n}),a&&Object(ze.jsx)($n.a,{}),t,Object(ze.jsx)("div",{style:{marginTop:60},children:Object(ze.jsx)(Un,{})})]})})),Oc=n(214),fc=function(e){var t=e.title,n=e.component,a=e.layout,r=e.setTheme,c=e.theme,s=Object(Oc.a)(e,["title","component","layout","setTheme","theme"]);return Object(ze.jsx)(j.b,Object(da.a)(Object(da.a)({},s),{},{render:function(e){return Object(ze.jsx)(a,Object(da.a)(Object(da.a)({},e),{},{title:t,setTheme:r,theme:c,children:Object(ze.jsx)(n,Object(da.a)({},e))}))}}))},gc=n(447),xc=n(457),vc=(n(320),n(204)),yc=n.n(vc),Sc={checkAuthentication:me,resetAuthErrorMsg:function(){return{type:K}},resetFormErrorMsg:function(){return{type:gr}},resetPostErrorMsg:function(){return{type:ft}},setPrevPath:function(e){return{type:se,payload:e}},googleAuthenticate:function(e,t){return function(){var n=Object(v.a)(x.a.mark((function n(a){var r,c,s,i;return x.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(!e||!t||localStorage.getItem("access")){n.next=15;break}return r={headers:{"Content-Type":"application/x-www-form-urlencoded"}},c={state:e,code:t},s=Object.keys(c).map((function(e){return encodeURIComponent(e)+"="+encodeURIComponent(c[e])})).join("&"),n.prev=4,n.next=7,S.a.post("/auth/o/google-oauth2/?".concat(s),r);case 7:i=n.sent,a({type:ie,payload:i.data}),a(pe()),n.next=15;break;case 12:n.prev=12,n.t0=n.catch(4),a({type:oe});case 15:case"end":return n.stop()}}),n,null,[[4,12]])})));return function(e){return n.apply(this,arguments)}}()}},wc=Object(o.b)((function(e){return{authErrorMsg:e.auth.authErrorMsg,formErrorMsg:e.form.formErrorMsg,postErrorMsg:e.post.postErrorMsg,prevPath:e.auth.prevPath}}),Sc)((function(e){var t=e.children,n=e.checkAuthentication,r=(e.prevPath,e.setPrevPath),c=e.authErrorMsg,s=e.formErrorMsg,i=e.postErrorMsg,o=e.resetAuthErrorMsg,l=e.resetFormErrorMsg,u=e.resetPostErrorMsg,d=e.googleAuthenticate,h=function(e,t){"clickaway"!==t&&(c&&o(),s&&l(),i&&u())},b=Object(j.h)(),p=Object(a.useRef)();return Object(a.useEffect)((function(){return window.scroll(0,0),function(){r(b.pathname)}}),[b.pathname]),Object(a.useEffect)((function(){var e=yc.a.parse(b.search),t=e.state?e.state:null,a=e.code?e.code:null;t&&a?d(t,a):n()}),[b]),Object(ze.jsxs)("div",{children:[Object(ze.jsx)(xc.a,{anchorOrigin:{vertical:"top",horizontal:"center"},open:c||s||i,onClose:h,style:{zIndex:1502},children:Object(ze.jsx)(gc.a,{action:Object(ze.jsxs)("div",{className:"buttonHolder",children:[Object(ze.jsx)("div",{className:"div",style:{zIndex:1504},onClick:h,onMouseEnter:function(e){"rgb(211, 47, 47)"!==p.current.style.backgroundColor&&(p.current.style.backgroundColor="rgb(234, 64, 51)")},onMouseLeave:function(e){p.current.style.backgroundColor="rgb(244, 67, 54)",p.current.classList.remove("grow"),e.target.classList.remove("grow")}}),Object(ze.jsx)("div",{className:"close",style:{zIndex:1503},children:"\u2716"}),Object(ze.jsx)("button",{autoFocus:!0,onFocus:function(e){e.target.style.outline="none",e.target.style.backgroundColor="rgb(211, 47, 47)",e.target.classList.add("grow")},onBlur:function(e){p.current.style.backgroundColor="rgb(244, 67, 54)",p.current.classList.remove("grow"),e.target.classList.remove("grow")},onClick:h,ref:p,className:"button"})]}),severity:"error",variant:"filled",children:c||(s||i)})}),(c||s||i)&&Object(ze.jsx)("div",{className:"sheild",style:{zIndex:1501}}),t]})})),Cc=n(83),_c=n(205),Pc=n(206),Ec={access:localStorage.getItem("access"),refresh:localStorage.getItem("refresh"),isAuthenticated:!1,user:null,registrationSuccess:!1,activationSuccess:!1,resendActivationEmailSuccess:!1,deleteAccountSuccess:!1,resetPasswordSuccess:!1,resetPasswordConfirmSuccess:!1,changePasswordSuccess:!1,editBioSuccess:!1,editFavouritesSuccess:!1,authErrorMsg:"",authLoading:!1,profileLoading:!1,prevPath:""},Tc=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ec,t=arguments.length>1?arguments[1]:void 0,n=t.type,a=t.payload;switch(n){case _:return Object(da.a)(Object(da.a)({},e),{},{registrationSuccess:!0,authLoading:!1});case P:return Object(da.a)(Object(da.a)({},e),{},{registrationSuccess:!1,authErrorMsg:a,authLoading:!1});case E:return Object(da.a)(Object(da.a)({},e),{},{activationSuccess:!0,authLoading:!1});case T:return Object(da.a)(Object(da.a)({},e),{},{activationSuccess:!1,authErrorMsg:a,authLoading:!1});case k:return Object(da.a)(Object(da.a)({},e),{},{resendActivationEmailSuccess:!0,authLoading:!1});case L:return Object(da.a)(Object(da.a)({},e),{},{resendActivationEmailSuccess:!1,authErrorMsg:a,authLoading:!1});case A:return Object(da.a)(Object(da.a)({},e),{},{user:a,authLoading:!1});case I:return Object(da.a)(Object(da.a)({},e),{},{user:null,authLoading:!1});case N:return Object(da.a)(Object(da.a)({},e),{},{isAuthenticated:!0});case R:return Object(da.a)(Object(da.a)({},e),{},{isAuthenticated:!1});case ie:case F:return localStorage.setItem("access",a.access),localStorage.setItem("refresh",a.refresh),Object(da.a)(Object(da.a)({},e),{},{access:a.access,refresh:a.refresh,authLoading:!1});case oe:case U:return Object(da.a)(Object(da.a)({},e),{},{access:null,refresh:null,authErrorMsg:a,authLoading:!1});case D:return localStorage.removeItem("access"),localStorage.removeItem("refresh"),Object(da.a)(Object(da.a)({},e),{},{access:null,refresh:null,isAuthenticated:!1,user:null});case M:return localStorage.removeItem("access"),localStorage.removeItem("refresh"),Object(da.a)(Object(da.a)({},e),{},{deleteAccountSuccess:!0,authLoading:!1,access:null,refresh:null,isAuthenticated:!1,user:null});case W:return Object(da.a)(Object(da.a)({},e),{},{deleteAccountSuccess:!1,authErrorMsg:a,authLoading:!1});case q:return Object(da.a)(Object(da.a)({},e),{},{resetPasswordSuccess:!0,authLoading:!1});case H:return Object(da.a)(Object(da.a)({},e),{},{resetPasswordSuccess:!1,authErrorMsg:a,authLoading:!1});case B:return Object(da.a)(Object(da.a)({},e),{},{resetPasswordConfirmSuccess:!0,authLoading:!1});case G:return Object(da.a)(Object(da.a)({},e),{},{resetPasswordConfirmSuccess:!1,authErrorMsg:a,authLoading:!1});case J:return Object(da.a)(Object(da.a)({},e),{},{changePasswordSuccess:!0,authLoading:!1});case Q:return Object(da.a)(Object(da.a)({},e),{},{changePasswordSuccess:!1,authErrorMsg:a,authLoading:!1});case z:return Object(da.a)(Object(da.a)({},e),{},{authLoading:!0});case Y:return Object(da.a)(Object(da.a)({},e),{},{authLoading:!1});case K:return Object(da.a)(Object(da.a)({},e),{},{authErrorMsg:""});case X:return Object(da.a)(Object(da.a)({},e),{},{changePasswordSuccess:!1});case V:return Object(da.a)(Object(da.a)({},e),{},{profileLoading:!0});case ee:var r=Object(da.a)({},e.user);return r.profile_pic=a,Object(da.a)(Object(da.a)({},e),{},{profileLoading:!1,user:r});case te:return Object(da.a)(Object(da.a)({},e),{},{profileLoading:!1,authErrorMsg:a});case ne:return Object(da.a)(Object(da.a)({},e),{},{profileLoading:!1,editBioSuccess:!0});case ae:return Object(da.a)(Object(da.a)({},e),{},{profileLoading:!1,authErrorMsg:a,editBioSuccess:!1});case re:return Object(da.a)(Object(da.a)({},e),{},{profileLoading:!1,editFavouritesSuccess:!0});case ce:return Object(da.a)(Object(da.a)({},e),{},{profileLoading:!1,authErrorMsg:a,editFavouritesSuccess:!1});case Z:return Object(da.a)(Object(da.a)({},e),{},{editBioSuccess:!1});case $:return Object(da.a)(Object(da.a)({},e),{},{editFavouritesSuccess:!1});case se:return Object(da.a)(Object(da.a)({},e),{},{prevPath:a});case le:var c=Object(da.a)({},e.user);return c.just_registered=a,Object(da.a)(Object(da.a)({},e),{},{user:c});case ue:default:return e}},kc={formLoading:!1,roommateQuestions:[],roommateCategories:[],housingQuestions:[],housingCategories:[],profileQuestions:[],profileCategories:[],formErrorMsg:""},Lc=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:kc,t=arguments.length>1?arguments[1]:void 0,n=t.type,a=t.payload;switch(n){case pr:var r=a.questions.map((function(e){return e.category})),c=Object(La.a)(new Set(r));return c.push("Confirmation"),1===a.formType?Object(da.a)(Object(da.a)({},e),{},{formLoading:!1,roommateQuestions:a.questions,roommateCategories:c}):2===a.formType?Object(da.a)(Object(da.a)({},e),{},{formLoading:!1,housingQuestions:a.questions,housingCategories:c}):Object(da.a)(Object(da.a)({},e),{},{formLoading:!1,profileQuestions:a.questions,profileCategories:c});case mr:return 1===a.formType?Object(da.a)(Object(da.a)({},e),{},{formLoading:!1,roommateQuestions:[],roommateCategories:[],formErrorMsg:a.formErrorMsg}):2===a.formType?Object(da.a)(Object(da.a)({},e),{},{formLoading:!1,housingQuestions:[],housingCategories:[],formErrorMsg:a.formErrorMsg}):Object(da.a)(Object(da.a)({},e),{},{formLoading:!1,profileQuestions:[],profileCategories:[],formErrorMsg:a.formErrorMsg});case Or:return Object(da.a)(Object(da.a)({},e),{},{formLoading:!0});case fr:return Object(da.a)(Object(da.a)({},e),{},{formLoading:!1});case gr:return Object(da.a)(Object(da.a)({},e),{},{formErrorMsg:""});default:return e}},Ac={postLoading:!1,posts:[],housingPosts:[],postsType:[],post:null,housingPost:null,userPosts:[],userRoommatePosts:[],userHousingPosts:[],count:0,userRoommatePostsCount:0,userHousingPostsCount:0,searchedPost:null,searchItem:null,searchedPostCount:0,next:null,previous:null,postErrorMsg:"",createPostSuccess:!1,editPostSuccess:!1,deletePostSuccess:!1,searchPostSuccess:!1,cancelSearchSuccess:!1,page:1,filter:at},Ic=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ac,t=arguments.length>1?arguments[1]:void 0,n=t.type,a=t.payload;switch(n){case rt:return 1===a.type?Object(da.a)(Object(da.a)({},e),{},{postLoading:!1,posts:a.resdata.results,count:a.resdata.count,next:a.resdata.next,previous:a.resdata.previous}):Object(da.a)(Object(da.a)({},e),{},{postLoading:!1,housingPosts:a.resdata.results,count:a.resdata.count,next:a.resdata.next,previous:a.resdata.previous});case ct:return Object(da.a)(Object(da.a)({},e),{},{postLoading:!1,postErrorMsg:a});case st:return 1===a.post_form_type?Object(da.a)(Object(da.a)({},e),{},{postLoading:!1,post:a}):Object(da.a)(Object(da.a)({},e),{},{postLoading:!1,housingPost:a});case it:return Object(da.a)(Object(da.a)({},e),{},{postLoading:!1,post:null,postErrorMsg:a});case ot:return 1===a.type?Object(da.a)(Object(da.a)({},e),{},{postLoading:!1,userRoommatePosts:a.userPosts.results,userRoommatePostsCount:a.userPosts.count}):2===a.type?Object(da.a)(Object(da.a)({},e),{},{postLoading:!1,userHousingPosts:a.userPosts.results,userHousingPostsCount:a.userPosts.count}):Object(da.a)(Object(da.a)({},e),{},{postLoading:!1,userPosts:a.userPosts.results});case lt:return Object(da.a)(Object(da.a)({},e),{},{postLoading:!1,userPosts:null,userRoommatePosts:null,userHousingPosts:null,postErrorMsg:a});case ut:return Object(da.a)(Object(da.a)({},e),{},{postLoading:!1,createPostSuccess:!0});case dt:return Object(da.a)(Object(da.a)({},e),{},{postLoading:!1,postErrorMsg:a,createPostSuccess:!1});case jt:return Object(da.a)(Object(da.a)({},e),{},{postLoading:!1,editPostSuccess:!0});case ht:return Object(da.a)(Object(da.a)({},e),{},{postLoading:!1,postErrorMsg:a,editPostSuccess:!1});case bt:return Object(da.a)(Object(da.a)({},e),{},{postLoading:!1,deletePostSuccess:!0});case pt:return Object(da.a)(Object(da.a)({},e),{},{postLoading:!1,postErrorMsg:a,deletePostFail:!1});case mt:return Object(da.a)(Object(da.a)({},e),{},{postLoading:!0});case Ot:return Object(da.a)(Object(da.a)({},e),{},{postLoading:!1});case ft:return Object(da.a)(Object(da.a)({},e),{},{postErrorMsg:""});case gt:return Object(da.a)(Object(da.a)({},e),{},{createPostSuccess:!1});case xt:return Object(da.a)(Object(da.a)({},e),{},{editPostSuccess:!1});case vt:return Object(da.a)(Object(da.a)({},e),{},{deletePostSuccess:!1});case yt:return Object(da.a)(Object(da.a)({},e),{},{postLoading:!1,searchPostSuccess:!0,cancelSearchSuccess:!1,searchedPost:a.searchedPost.results,searchItem:a.searchItem,searchedPostCount:a.searchedPost.count});case St:return Object(da.a)(Object(da.a)({},e),{},{postLoading:!1,postErrorMsg:a});case wt:return Object(da.a)(Object(da.a)({},e),{},{postLoading:!1,searchPostSuccess:!1,cancelSearchSuccess:!0,searchedPost:null,searchedItem:null});case Ct:return Object(da.a)(Object(da.a)({},e),{},{postLoading:!1,postErrorMsg:a});case _t:return Object(da.a)(Object(da.a)({},e),{},{page:a});case Pt:return Object(da.a)(Object(da.a)({},e),{},{filter:a});default:return e}},Nc={messages:[],roomList:[],room:null,chatErrorMsg:"",chatUser:null,chatHistory:null},Rc=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Nc,t=arguments.length>1?arguments[1]:void 0,n=t.type,a=t.payload;switch(n){case hn:return Object(da.a)(Object(da.a)({},e),{},{roomList:a});case bn:return Object(da.a)(Object(da.a)({},e),{},{chatErrorMsg:a});case pn:return Object(da.a)(Object(da.a)({},e),{},{chatHistory:a});case mn:return Object(da.a)(Object(da.a)({},e),{},{chatErrorMsg:a});case On:return Object(da.a)(Object(da.a)({},e),{},{room:a});case fn:return Object(da.a)(Object(da.a)({},e),{},{chatErrorMsg:a});case gn:return Object(da.a)({},e);case xn:return Object(da.a)(Object(da.a)({},e),{},{chatErrorMsg:a});case vn:return Object(da.a)({},e);case yn:return Object(da.a)(Object(da.a)({},e),{},{chatErrorMsg:a});case Sn:return Object(da.a)(Object(da.a)({},e),{},{chatUser:a});case wn:return Object(da.a)(Object(da.a)({},e),{},{chatHistory:null});default:return e}},Fc=Object(Cc.combineReducers)({auth:Tc,form:Lc,post:Ic,chat:Rc}),Uc=function(e,t){return"LOGOUT"===t.type&&(e=void 0),Fc(e,t)},Dc=Object(_c.composeWithDevTools)({trace:!0,traceLimit:25}),Mc=[Pc.a],Wc=Object(Cc.createStore)(Uc,Dc(Cc.applyMiddleware.apply(void 0,Mc))),qc=(n(322),{loadUser:pe,getUserPosts:It,getPostList:Lt,editPost:Rt,postLoading:function(){return function(e){return e(Kt())}},resetEditPostSuccess:Zt}),Hc=Object(o.b)((function(e){return{user:e.auth.user,userRoommatePosts:e.post.userRoommatePosts,posts:e.post.posts,loading:e.post.postLoading,next:e.post.next,count:e.post.count}}),qc)((function(e){var t=e.user,n=e.userRoommatePosts,r=e.getUserPosts,c=e.posts,s=e.next,o=e.count,l=e.getPostList,u=e.editPost,d=e.resetEditPostSuccess,h=e.loading,b=e.postLoading,p=Object(j.g)(),f=Object(a.useState)([]),g=Object(i.a)(f,2),x=g[0],v=g[1],y=Object(a.useState)(2),S=Object(i.a)(y,2),w=S[0],C=S[1],_=function(e){switch(e){case"Irrelevant":return 0;case"A little important":return 1;case"Somewhat important":return 10;case"Very important":return 50;case"Mandatory":return 250;default:return 0}};return Object(a.useEffect)((function(){null!==s&&(l(1,w),C(w+1))}),[s]),Object(a.useEffect)((function(){return v([].concat(Object(La.a)(x),Object(La.a)(c)))}),[c]),Object(a.useEffect)((function(){return t?r(t.id,1):null}),[t]),Object(a.useEffect)((function(){return n.length>0&&x.length===o?function(){b();var e=0,t=0,a=0,r=0,c=0,s=n[0],i=s.score_list;Array.isArray(i)&&(i=i.reduce((function(e,t){return Object(da.a)(Object(da.a)({},e),{},Object(aa.a)({},t.post,t))}),{}),i=Object.assign({},i)),x.forEach((function(n){var o=n,l=o.score_list;if(Array.isArray(l)&&(l=l.reduce((function(e,t){return Object(da.a)(Object(da.a)({},e),{},Object(aa.a)({},t.post,t))}),{}),l=Object.assign({},l)),o.owner.id!==s.owner.id){o.selected_choices.forEach((function(n,i){n.forEach((function(n,l){if(Array.isArray(o.selected_choices[i][l].myChoice)){var u=0,d=s.selected_choices[i][l].otherChoice.length;for(var j in o.selected_choices[i][l].myChoice)j in s.selected_choices[i][l].otherChoice&&u++;e+=_(s.selected_choices[i][l].priority)*(u/d)}else o.selected_choices[i][l].myChoice===s.selected_choices[i][l].otherChoice&&(e+=_(s.selected_choices[i][l].priority));if(t+=_(s.selected_choices[i][l].priority),Array.isArray(s.selected_choices[i][l].otherChoice)){for(var h in u=0,d=o.selected_choices[i][l].otherChoice.length,s.selected_choices[i][l].myChoice)h in o.selected_choices[i][l].otherChoice&&u++;a+=_(o.selected_choices[i][l].priority)*(u/d)}else s.selected_choices[i][l].myChoice===o.selected_choices[i][l].otherChoice&&(a+=_(o.selected_choices[i][l].priority));r+=_(o.selected_choices[i][l].priority),c++}))}));var d=(100*Math.pow(e/t*(a/r),1/c)).toFixed(0);i=Object(da.a)(Object(da.a)({},i),{},Object(aa.a)({},o.id,{post:o.id,score:d})),l=Object(da.a)(Object(da.a)({},l),{},Object(aa.a)({},s.id,{post:s.id,score:d})),u(o.id,o.post_form_type,void 0,void 0,l,r,void 0)}})),u(s.id,s.post_form_type,void 0,void 0,i,t,void 0)}():null}),[n,x]),Object(ze.jsx)(sn.a,{style:{display:"flex",flexDirection:"column",alignItems:"center",padding:20},children:h?Object(ze.jsx)(m.a,{variant:"h6",children:"Matching the perfect roommate for you..."}):Object(ze.jsxs)(ze.Fragment,{children:[Object(ze.jsx)(m.a,{gutterBottom:!0,variant:"h6",children:"Matching completed"}),Object(ze.jsx)(O.a,{autoFocus:!0,variant:"contained",color:"primary",onClick:function(){d(),p.push("/roommates")},children:"Return to roommate dashboard"})]})})})),Bc={getPostDetail:At},Gc=Object(o.b)((function(e){return{housingPost:e.post.housingPost}}),Bc)((function(e){var t=e.housingPost,n=e.getPostDetail,r=Object(j.i)().id,c=Object(a.useState)({}),s=Object(i.a)(c,2),o=s[0],l=s[1];return Object(a.useEffect)((function(){n(r)}),[]),Object(a.useEffect)((function(){var e=null===t||void 0===t?void 0:t.selected_choices.map((function(e){return e.reduce((function(e,t){return Object(da.a)(Object(da.a)({},e),{},Object(aa.a)({},t.question,t))}),{})})),n=Object.assign({},e);l(n)}),[t]),Object(ze.jsx)("div",{children:Object(ze.jsx)(Hr,{initialFormFields:o,id:r})})})),Jc=n(458),Qc=n(210),zc=n.n(Qc),Yc=n(209),Vc=n.n(Yc),Kc=n(207),Xc=n.n(Kc),Zc=n(208),$c=Object(Zc.autoPlay)(Xc.a),es=function(e){var t=e.tutorialSteps,n=Object(b.a)((function(e){return{root:{width:500,position:"relative"},img:{height:300,display:"block",overflow:"hidden",width:500}}}))(),r=Object(a.useState)(0),c=Object(i.a)(r,2),s=c[0],o=c[1],l=t.length;return Object(ze.jsxs)("div",{className:n.root,children:[Object(ze.jsx)($c,{axis:"x",index:s,onChangeIndex:function(e){o(e)},enableMouseEvents:!0,style:{position:"relative"},children:t.map((function(e,t){return Object(ze.jsx)("div",{children:Math.abs(s-t)<=2?Object(ze.jsx)("img",{className:n.img,src:e}):null},e.label)}))}),l>1&&Object(ze.jsx)(Jc.a,{steps:l,activeStep:s,nextButton:Object(ze.jsx)(Gn.a,{size:"small",onClick:function(){o((function(e){return e+1}))},disabled:s===l-1,children:Object(ze.jsx)(Vc.a,{})}),backButton:Object(ze.jsx)(Gn.a,{size:"small",onClick:function(){o((function(e){return e-1}))},disabled:0===s,children:Object(ze.jsx)(zc.a,{})}),style:{position:"absolute",bottom:0,opacity:.5,height:15}})]})},ts={getQuestions:xr,getPostDetail:At,getUserPosts:It,setChatUser:Nn},ns=Object(o.b)((function(e){return{user:e.auth.user,userHousingPosts:e.post.userHousingPosts,housingPost:e.post.housingPost,housingCategories:e.form.housingCategories,prevPath:e.auth.prevPath}}),ts)((function(e){var t=e.user,n=e.userHousingPosts,r=e.getUserPosts,c=e.housingPost,s=e.getPostDetail,i=e.housingCategories,o=e.getQuestions,l=e.prevPath,u=e.setChatUser,d=Object(b.a)((function(e){return{avatar:{height:50,width:50,marginBottom:20,marginRight:10},content:{display:"flex",flexDirection:"column",alignItems:"center"},tag:{marginRight:5,marginTop:5},category:{marginBottom:30},card:{width:"100%",marginLeft:23,marginRight:23},tooltip:{position:"fixed",bottom:e.spacing(2),right:e.spacing(3)},media:{width:400,height:300,margin:"auto"}}}))(),h=Object(j.g)(),p=Object(j.i)().id;return Object(a.useEffect)((function(){0===i.length&&o(2),s(p)}),[]),Object(a.useEffect)((function(){return t?r(t.id):null}),[t]),Object(ze.jsx)("div",{className:d.card,children:(null===c||void 0===c?void 0:c.id.toString())===p.toString()?Object(ze.jsxs)(ze.Fragment,{children:[Object(ze.jsxs)(on.a,{children:[Object(ze.jsx)(jr.a,{avatar:Object(ze.jsx)(Gn.a,{onClick:function(){h.push(l)},children:Object(ze.jsx)(br.a,{})})}),Object(ze.jsxs)(dn.a,{className:d.content,children:[Object(ze.jsx)(es,{tutorialSteps:c.images}),Object(ze.jsx)("br",{}),Object(ze.jsx)(m.a,{variant:"h5",children:c.selected_choices[0][0].choice}),Object(ze.jsx)(m.a,{variant:"body2",color:"textSecondary",children:c.selected_choices[0][1].choice}),Object(ze.jsx)("br",{}),Object(ze.jsx)("br",{}),Object(ze.jsxs)(f.a,{container:!0,children:[Object(ze.jsxs)(f.a,{container:!0,item:!0,xs:12,md:6,children:[Object(ze.jsx)(f.a,{item:!0,xs:1}),Object(ze.jsx)(f.a,{item:!0,xs:11,children:c.selected_choices.map((function(e,t){return 0!==t?Object(ze.jsxs)("div",{className:d.category,children:[Object(ze.jsx)(m.a,{variant:"body1",color:"textPrimary",gutterBottom:!0,children:i[t]}),e.map((function(e){return Array.isArray(e.choice)?Object(ze.jsx)(ze.Fragment,{children:e.choice.map((function(e){return Object(ze.jsx)(jn.a,{className:d.tag,label:e,color:"primary"},e)}))}):Object(ze.jsx)(jn.a,{className:d.tag,label:e.choice,color:"primary"},e)}))]},e):null}))})]}),Object(ze.jsxs)(f.a,{container:!0,item:!0,xs:12,md:6,children:[Object(ze.jsx)(f.a,{item:!0,xs:1}),Object(ze.jsx)(f.a,{item:!0,xs:10,children:Object(ze.jsxs)(sn.a,{style:{padding:20},children:[Object(ze.jsxs)("div",{style:{display:"flex",justifyContent:"flex-start",alignItems:"center"},children:[Object(ze.jsxs)(m.a,{variant:"h6",children:["SGD ",c.selected_choices[0][3].choice]}),Object(ze.jsx)(m.a,{variant:"body2",color:"textSecondary",children:"\xa0/ night"})]}),Object(ze.jsxs)(m.a,{variant:"body2",color:"textSecondary",children:["Located at ",c.selected_choices[0][2].choice]}),Object(ze.jsx)("br",{}),Object(ze.jsxs)("div",{style:{display:"flex",flexDirection:"row"},children:[Object(ze.jsx)(Ia.a,{className:d.avatar,src:c.owner.profile_pic}),Object(ze.jsxs)("div",{children:[Object(ze.jsxs)(m.a,{children:[c.owner.first_name," ",c.owner.last_name]}),Object(ze.jsx)(m.a,{variant:"body1",color:"textSecondary",children:c.owner.bio.length>25?c.owner.bio.substring(0,25)+"...":c.owner.bio})]})]}),t&&t.id!==c.owner.id&&Object(ze.jsx)(O.a,{fullWidth:!0,variant:"contained",color:"primary",onClick:function(){u(c.owner),h.push("/chat")},children:"Chat with me"})]})}),Object(ze.jsx)(f.a,{item:!0,xs:1})]})]})]})]}),t&&0===(null===n||void 0===n?void 0:n.length)&&Object(ze.jsx)(Bn.a,{title:"",onClick:function(){h.push("/housing-form")},children:Object(ze.jsx)(fa.a,{color:"primary",className:d.tooltip,children:Object(ze.jsx)(va.a,{})})})]}):null})})),as={getPostDetail:At},rs=Object(o.b)((function(e){return{post:e.post.post}}),as)((function(e){var t=e.post,n=e.getPostDetail,r=Object(j.i)().id,c=Object(a.useState)({}),s=Object(i.a)(c,2),o=s[0],l=s[1];return Object(a.useEffect)((function(){n(r)}),[]),Object(a.useEffect)((function(){var e=null===t||void 0===t?void 0:t.selected_choices.map((function(e){return e.reduce((function(e,t){return Object(da.a)(Object(da.a)({},e),{},Object(aa.a)({},t.question,t))}),{})})),n=Object.assign({},e);l(n)}),[t]),Object(ze.jsx)("div",{children:Object(ze.jsx)(Ur,{initialFormFields:o,id:r})})})),cs=n(96),ss=n(211),is=n(212),os=n.n(is),ls=n(97),us=n(443),ds=function(e){var t=e.user,n=e.name,r=e.pic,c=e.msg,s=e.time,o=e.unreadMsgs,l=e.animationDelay,u=e.active,d=e.setRoom,j=e.room,h=e.editMsg,p=Object(b.a)((function(e){return{active:{backgroundColor:e.palette.action.hover}}}))(),O=Object(a.useState)(!1),f=Object(i.a)(O,2),g=f[0],x=f[1];return Object(ze.jsx)(sn.a,{style:{width:"100%",marginBottom:5,minWidth:250},children:Object(ze.jsx)(ls.a,{style:{width:"100%",borderRadius:5},className:Object(ra.a)(Object(aa.a)({},p.active,u||g)),onMouseEnter:function(){x(!0)},onMouseLeave:function(){x(!1)},children:Object(ze.jsxs)(zr.a,{style:{animationDelay:"0.".concat(l,"s"),marginBottom:10,display:"flex"},onClick:function(){d(j.label),j.messages.forEach((function(e){e.hasRead||e.user_id.toString()===t.id.toString()||h(e.id,!0)}))},children:[Object(ze.jsx)(us.a,{children:Object(ze.jsx)(Ia.a,{src:r})}),Object(ze.jsxs)("div",{style:{display:"flex",flexDirection:"column",width:"100%",overflow:"hidden"},children:[Object(ze.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[Object(ze.jsx)(m.a,{variant:"body1",children:n}),0!==o&&Object(ze.jsx)("div",{style:{width:20,height:20,backgroundColor:"red",display:"flex",justifyContent:"center",alignItems:"center",borderRadius:"50%"},children:Object(ze.jsx)("div",{style:{color:"white",textAlign:"center"},children:o})})]}),Object(ze.jsxs)("div",{style:{display:"flex",justifyContent:"space-between"},children:[Object(ze.jsx)(m.a,{variant:"body2",color:"textSecondary",children:c&&(c.length>15?c.substring(0,15)+"...":c)}),Object(ze.jsx)(m.a,{variant:"body2",color:"textSecondary",style:{overflow:"hidden"},children:s&&s.split(" ")[1].split(":")[0]+":"+s.split(" ")[1].split(":")[1]+" "+s.split(" ")[2]})]})]})]})})})},js=n(161),hs=function(e){var t=e.user,n=e.msg,a=e.time,r=Object(js.a)((function(e){return{msg:{backgroundColor:e.palette.grey[400],padding:10,marginBottom:5,marginRight:5,borderRadius:10,maxWidth:"50%",textOverflow:"ellipsis",overflow:"hidden",whiteSpace:"nowrap",display:"flex",flexDirection:"column"},right:{justifyContent:"flex-end"},blue:{backgroundColor:e.palette.primary.main,color:e.palette.common.white,alignItems:"flex-end"}}}))();return Object(ze.jsx)("div",{style:{animationDelay:"0.8s",display:"flex",alignItems:"center"},className:Object(ra.a)(Object(aa.a)({},r.right,t)),children:Object(ze.jsxs)("div",{className:Object(ra.a)(r.msg,Object(aa.a)({},r.blue,t)),children:[Object(ze.jsx)(m.a,{variant:"body1",children:n}),Object(ze.jsx)(m.a,{variant:"body2",children:a?a.split(" ")[1].split(":")[0]+":"+a.split(" ")[1].split(":")[1]+" "+a.split(" ")[2]:null})]})})},bs=(n(364),{getRoomList:Cn,postRoom:function(e,t,n){return function(){var a=Object(v.a)(x.a.mark((function a(r){var c,s,i,o;return x.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return c=localStorage.getItem("access"),s={headers:{"Content-Type":"application/json",Authorization:"JWT ".concat(c)}},i=JSON.stringify({user1:e,user2:t,label:n}),a.prev=3,a.next=6,S.a.post("/chat/room-list/",i,s);case 6:o=a.sent,r(kn(o.data)),a.next=13;break;case 10:a.prev=10,a.t0=a.catch(3),r(Ln("Unable to post room"));case 13:case"end":return a.stop()}}),a,null,[[3,10]])})));return function(e){return a.apply(this,arguments)}}()},checkChatHistory:function(e,t){return function(){var n=Object(v.a)(x.a.mark((function n(a){var r,c;return x.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return r={headers:{"Content-Type":"application/json"}},n.prev=1,n.next=4,S.a.get("/chat/room-list/?user1=".concat(e,"&user2=").concat(t),r);case 4:c=n.sent,a(En(c.data)),n.next=11;break;case 8:n.prev=8,n.t0=n.catch(1),a(Tn("Unable to check chat history"));case 11:case"end":return n.stop()}}),n,null,[[1,8]])})));return function(e){return n.apply(this,arguments)}}()},resetChatHistory:function(){return{type:wn}},editMsg:function(e,t){return function(){var n=Object(v.a)(x.a.mark((function n(a){var r,c,s,i;return x.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return r=localStorage.getItem("access"),c={headers:{"Content-Type":"application/json",Authorization:"JWT ".concat(r)}},s=JSON.stringify({hasRead:t}),n.prev=3,n.next=6,S.a.patch("/chat/message-list/".concat(e,"/"),s,c);case 6:i=n.sent,a(An(i.data)),n.next=13;break;case 10:n.prev=10,n.t0=n.catch(3),a(In("Unable to edit message"));case 13:case"end":return n.stop()}}),n,null,[[3,10]])})));return function(e){return n.apply(this,arguments)}}()}}),ps=Object(o.b)((function(e){return{isAuthenticated:e.auth.isAuthenticated,user:e.auth.user,roomList:e.chat.roomList,chatUser:e.chat.chatUser,chatHistory:e.chat.chatHistory}}),bs)((function(e){var t,n,r,c=e.user,s=e.isAuthenticated,o=e.roomList,l=e.getRoomList,u=e.postRoom,d=e.chatUser,h=e.chatHistory,p=e.checkChatHistory,O=e.resetChatHistory,g=e.editMsg,x=Object(b.a)((function(e){return{search:{width:"100%",height:40},list:{overflow:"auto"},content:{width:"100%",overflow:"auto"}}})),v=Object(a.useState)([]),y=Object(i.a)(v,2),S=y[0],w=y[1],C=Object(a.useState)(null),_=Object(i.a)(C,2),P=_[0],E=_[1],T=Object(a.useState)(null),k=Object(i.a)(T,2),L=k[0],A=k[1],I=Object(a.useState)(""),N=Object(i.a)(I,2),R=N[0],F=N[1],U=Object(a.useState)(""),D=Object(i.a)(U,2),M=D[0],W=D[1],q=Object(a.useState)([]),H=Object(i.a)(q,2),B=H[0],G=H[1],J=Object(a.useState)(null),Q=Object(i.a)(J,2),z=(Q[0],Q[1],x()),Y=Object(j.h)(),V=Object(a.useRef)(),K="https:"===window.location.protocol?"wss":"ws",X="localhost:8000"===window.location.host?"localhost:8000/":"housematesorbital.herokuapp.com/";return Object(a.useEffect)((function(){R||null===S||void 0===S||S.forEach((function(e){e.hasRead||e.user_id.toString()===c.id.toString()||g(e.id,!0)}))}),[R]),Object(a.useEffect)((function(){c&&l(c.id)}),[c]),Object(a.useEffect)((function(){var e=o.reduce((function(e,t){return Object(da.a)(Object(da.a)({},e),{},Object(aa.a)({},t.label,t))}),{});G(e)}),[o]),Object(a.useEffect)((function(){var e,t;(null===(e=B[M])||void 0===e?void 0:e.id)!==(null===P||void 0===P?void 0:P.id)&&E(B[M]),w(null===(t=B[M])||void 0===t?void 0:t.messages)}),[B]),Object(a.useEffect)((function(){if(M){var e=new ss.w3cwebsocket(K+"://"+X+"ws/chat/"+M+"/");A(e)}}),[M]),Object(a.useEffect)((function(){var e,t;(L&&(L.onopen=function(){console.log("WebSocket Client Connected: ",M)}),M)&&((null===(e=B[M])||void 0===e?void 0:e.id)!==(null===P||void 0===P?void 0:P.id)&&E(B[M]),w(null===(t=B[M])||void 0===t?void 0:t.messages));c&&l(c.id)}),[L]),Object(a.useEffect)((function(){L&&(L.onopen=function(){console.log("WebSocket Client Connected: ",M)},L.onmessage=function(e){var t=JSON.parse(e.data);console.log("got reply! ",t.type),t&&w([].concat(Object(La.a)(S),[{message:t.message,user_id:t.owner}])),l(c.id)})})),Object(a.useEffect)((function(){var e=document.getElementById("chatBody");e&&e.scrollTo(0,e.scrollHeight)}),[S]),Object(a.useEffect)((function(){var e;null===V||void 0===V||null===(e=V.current)||void 0===e||e.focus(),F(""),null===S||void 0===S||S.forEach((function(e){e.hasRead||e.user_id.toString()===c.id.toString()||g(e.id,!0)}))}),[P]),Object(a.useEffect)((function(){d&&p(c.id,d.id)}),[d]),Object(a.useEffect)((function(){if(h){if(0===h.length){var e=Object(cs.d)({dictionaries:[cs.c,cs.a,cs.b]});u(c.id,d.id,e),l(c.id),W(e)}else W(h[0].label);O()}}),[h]),s?Object(ze.jsx)(ze.Fragment,{children:0===(null===o||void 0===o?void 0:o.length)?Object(ze.jsx)(ze.Fragment,{children:Object(ze.jsxs)("div",{children:[Object(ze.jsx)(m.a,{variant:"h6",style:{marginLeft:5},children:"Chat"}),Object(ze.jsx)("div",{style:{textAlign:"center"},children:Object(ze.jsx)(m.a,{variant:"subtitle1",children:"No chats."})})]})}):Object(ze.jsxs)(f.a,{container:!0,spacing:3,children:[Object(ze.jsxs)(f.a,{container:!0,item:!0,xs:3,children:[Object(ze.jsx)(f.a,{item:!0,xs:12,style:{height:"8vh"},children:Object(ze.jsx)(m.a,{variant:"h6",style:{marginLeft:5},children:"Chat"})}),Object(ze.jsx)(f.a,{item:!0,xs:12,style:{height:"70vh"},children:Object(ze.jsx)(Qr.a,{dense:!0,className:z.list,style:{padding:0,overflow:"hidden"},children:o.map((function(e,t){var n,a,r,s,i,o;return Object(ze.jsx)(ze.Fragment,{children:Object(ze.jsx)(ds,{name:c.id===e.owner1.id?e.owner2.first_name+" "+e.owner2.last_name:e.owner1.first_name+" "+e.owner1.last_name,pic:c.id===e.owner1.id?e.owner2.profile_pic:e.owner1.profile_pic,msg:(null===P||void 0===P?void 0:P.id)===e.id&&(null===S||void 0===S||null===(n=S[(null===S||void 0===S?void 0:S.length)-1])||void 0===n?void 0:n.message)||(null===e||void 0===e||null===(a=e.messages[(null===e||void 0===e||null===(r=e.messages)||void 0===r?void 0:r.length)-1])||void 0===a?void 0:a.message),time:(null===P||void 0===P?void 0:P.id)===e.id&&(null===S||void 0===S||null===(s=S[(null===S||void 0===S?void 0:S.length)-1])||void 0===s?void 0:s.timestamp)||(null===e||void 0===e||null===(i=e.messages[(null===e||void 0===e||null===(o=e.messages)||void 0===o?void 0:o.length)-1])||void 0===i?void 0:i.timestamp),unreadMsgs:(null===P||void 0===P?void 0:P.id)===e.id&&(null===S||void 0===S?void 0:S.reduce((function(e,t){return e+(t.hasRead||t.user_id.toString()===c.id.toString()?0:1)}),0))||(null===e||void 0===e?void 0:e.messages.reduce((function(e,t){return e+(t.hasRead||t.user_id.toString()===c.id.toString()?0:1)}),0)),user:c,setRoom:W,editMsg:g,room:e,active:e.id===(null===P||void 0===P?void 0:P.id),animationDelay:t+1},e.id)})}))})})]}),P?Object(ze.jsxs)(f.a,{container:!0,item:!0,spacing:1,xs:9,style:{width:"100%"},children:[Object(ze.jsx)(f.a,{item:!0,xs:12,children:Object(ze.jsxs)(sn.a,{style:{width:"100%",display:"flex",padding:10,alignItems:"center",elevation:0},children:[Object(ze.jsx)(Ia.a,{src:(null===c||void 0===c?void 0:c.id)===(null===P||void 0===P||null===(t=P.owner1)||void 0===t?void 0:t.id)?null===P||void 0===P||null===(n=P.owner2)||void 0===n?void 0:n.profile_pic:null===P||void 0===P||null===(r=P.owner1)||void 0===r?void 0:r.profile_pic}),Object(ze.jsx)(m.a,{variant:"h6",style:{marginLeft:20},children:(null===c||void 0===c?void 0:c.id)===(null===P||void 0===P?void 0:P.owner1.id)?(null===P||void 0===P?void 0:P.owner2.first_name)+" "+(null===P||void 0===P?void 0:P.owner2.last_name):(null===c||void 0===c?void 0:c.id)===(null===P||void 0===P?void 0:P.owner2.id)?(null===P||void 0===P?void 0:P.owner1.first_name)+" "+(null===P||void 0===P?void 0:P.owner1.last_name):""})]})}),Object(ze.jsx)(f.a,{item:!0,xs:12,style:{width:"100%"},children:Object(ze.jsx)(sn.a,{style:{width:"100%",padding:10,elevation:0},elevation:0,children:Object(ze.jsx)("div",{style:{width:"100%",height:"50vh",overflow:"auto"},id:"chatBody",children:null===S||void 0===S?void 0:S.map((function(e,t){return Object(ze.jsx)(ze.Fragment,{children:Object(ze.jsx)(hs,{animationDelay:t+2,user:e.user_id.toString()===c.id.toString(),msg:e.message,time:e.timestamp})})}))})})}),Object(ze.jsx)(f.a,{item:!0,xs:12,children:Object(ze.jsx)(sn.a,{style:{width:"100%",paddingLeft:10,paddingRight:10,elevation:0},elevation:0,children:Object(ze.jsxs)("form",{noValidate:!0,onSubmit:function(e){e.preventDefault(),L.send(JSON.stringify({type:"message",message:R,owner:c.id})),F("")},style:{width:"100%",display:"flex",alignItems:"center",justifyContent:"center"},children:[Object(ze.jsx)(_a.a,{variant:"outlined",value:R,placeholder:"Type here...",fullWidth:!0,size:"small",className:"inputRounded",onChange:function(e){return function(e){return F(e.target.value)}(e)},inputRef:V}),Object(ze.jsx)(Gn.a,{color:"primary",type:"submit",style:{margin:5},disabled:!R||0===R.replace(/\s/g,"").length,children:Object(ze.jsx)(os.a,{})})]})})})]}):Object(ze.jsx)(f.a,{item:!0,xs:9,style:{width:"100%",height:"78vh"},children:Object(ze.jsx)(sn.a,{style:{width:"100%",height:"78vh",display:"flex",justifyContent:"center",alignItems:"center"},children:Object(ze.jsx)(m.a,{variant:"body1",style:{marginLeft:20,marginRight:20},children:"Select a user to start chatting!"})})})]})}):Object(ze.jsx)(j.a,{to:{pathname:"/login",state:{from:Y.pathname}}})})),ms=n(444),Os=function(){var e=Object(l.a)({palette:{primary:d.a,background:{default:"#ffffff"}}}),t=Object(l.a)({palette:{type:"dark",background:{default:"#424242"},text:{primary:"#ffffff"}}}),n=Object(a.useState)(!0),r=Object(i.a)(n,2),c=r[0],s=r[1],b=c?e:t;return Object(ze.jsx)(o.a,{store:Wc,children:Object(ze.jsxs)(u.a,{theme:b,children:[Object(ze.jsx)(ms.a,{}),Object(ze.jsx)(h.a,{children:Object(ze.jsx)(wc,{children:Object(ze.jsxs)(j.d,{children:[Object(ze.jsx)(fc,{path:"/login",title:"Login",component:ka,layout:mc}),Object(ze.jsx)(fc,{path:"/delete-account",title:"Delete Account",component:cr,layout:mc}),Object(ze.jsx)(fc,{path:"/register",title:"Registration",component:tr,layout:mc}),Object(ze.jsx)(fc,{path:"/change-password",title:"Change Password",component:ar,layout:mc}),Object(ze.jsx)(fc,{path:"/reset-password",title:"Reset Password",component:lr,layout:mc}),Object(ze.jsx)(fc,{path:"/password/reset/confirm/:uid/:token",title:"Reset Password",component:dr,layout:mc}),Object(ze.jsx)(fc,{path:"/activate/:uid/:token",title:"Account Activation",component:Ve,layout:mc}),Object(ze.jsx)(fc,{path:"/resend-activation-email",title:"Resend Activation Email",component:ir,layout:mc}),Object(ze.jsx)(fc,{exact:!0,path:"/dashboard",component:Ke,layout:bc,setTheme:s,theme:c}),Object(ze.jsx)(fc,{exact:!0,path:"/housings",component:Ca,layout:bc,setTheme:s,theme:c}),Object(ze.jsx)(fc,{path:"/housings/:id",component:ns,layout:bc,setTheme:s,theme:c}),Object(ze.jsx)(fc,{exact:!0,path:"/roommates",component:Gr,layout:bc,setTheme:s,theme:c}),Object(ze.jsx)(fc,{path:"/roommates/:id",component:Cr,layout:bc,setTheme:s,theme:c}),Object(ze.jsx)(fc,{path:"/roommate-form",component:Ur,layout:bc,setTheme:s,theme:c}),Object(ze.jsx)(fc,{path:"/housing-form",component:Hr,layout:bc,setTheme:s,theme:c}),Object(ze.jsx)(fc,{path:"/edit-roommate-form/:id",component:rs,layout:bc,setTheme:s,theme:c}),Object(ze.jsx)(fc,{path:"/edit-housing-form/:id",component:Gc,layout:bc,setTheme:s,theme:c}),Object(ze.jsx)(fc,{path:"/profile",component:$a,layout:bc,setTheme:s,theme:c}),Object(ze.jsx)(fc,{path:"/matchmaking",component:Hc,layout:bc,setTheme:s,theme:c}),Object(ze.jsx)(fc,{exact:!0,path:"/chat",component:ps,layout:bc,setTheme:s,theme:c}),Object(ze.jsx)(j.b,{exact:!0,path:"/",component:ua,setTheme:s,theme:c}),Object(ze.jsx)(j.b,{path:"*",component:ua,setTheme:s,theme:c})]})})})]})})};s.a.render(Object(ze.jsx)(r.a.StrictMode,{children:Object(ze.jsx)(Os,{})}),document.getElementById("root"))}},[[365,1,2]]]);
//# sourceMappingURL=main.e0bc361b.chunk.js.map